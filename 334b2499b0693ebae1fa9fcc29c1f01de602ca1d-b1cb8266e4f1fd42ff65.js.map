{"version":3,"file":"334b2499b0693ebae1fa9fcc29c1f01de602ca1d-b1cb8266e4f1fd42ff65.js","mappings":"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","sources":["webpack://gatsby-starter-ts/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://gatsby-starter-ts/./src/components/RootMatch/RootMatch.module.css","webpack://gatsby-starter-ts/./src/components/RootMatch/RootMatch.tsx","webpack://gatsby-starter-ts/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://gatsby-starter-ts/./src/components/Button/Button.module.css","webpack://gatsby-starter-ts/./src/components/Button/Button.tsx","webpack://gatsby-starter-ts/./src/context/GameContext.tsx","webpack://gatsby-starter-ts/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://gatsby-starter-ts/./src/components/AudioPlayer/AudioPlayer.module.css","webpack://gatsby-starter-ts/./src/components/AudioPlayer/AudioPlayer.tsx","webpack://gatsby-starter-ts/./src/hooks/useTextToSpeech.ts","webpack://gatsby-starter-ts/./src/components/TypeTheWord/TypeTheWord.module.css","webpack://gatsby-starter-ts/./src/components/PickTheOrigin/PickTheOrigin.tsx","webpack://gatsby-starter-ts/./node_modules/@babel/runtime/helpers/typeof.js","webpack://gatsby-starter-ts/./node_modules/canvas-confetti/dist/confetti.module.mjs","webpack://gatsby-starter-ts/./src/components/Layout/Header.module.css","webpack://gatsby-starter-ts/./src/components/Layout/Header.tsx","webpack://gatsby-starter-ts/./src/components/Layout/Layout.tsx","webpack://gatsby-starter-ts/./src/components/Layout/Layout.module.css","webpack://gatsby-starter-ts/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://gatsby-starter-ts/./src/components/TypeTheWord/TypeTheWord.tsx","webpack://gatsby-starter-ts/./src/components/GameUI/GameShell.tsx","webpack://gatsby-starter-ts/./node_modules/iobuffer/lib-esm/text.js","webpack://gatsby-starter-ts/./node_modules/iobuffer/lib-esm/IOBuffer.js","webpack://gatsby-starter-ts/./node_modules/fast-png/lib-esm/helpers/crc.js","webpack://gatsby-starter-ts/./node_modules/fast-png/lib-esm/helpers/unfilter.js","webpack://gatsby-starter-ts/./node_modules/fast-png/lib-esm/helpers/applyUnfilter.js","webpack://gatsby-starter-ts/./node_modules/fast-png/lib-esm/helpers/decodeInterlaceAdam7.js","webpack://gatsby-starter-ts/./node_modules/fast-png/lib-esm/helpers/decodeInterlaceNull.js","webpack://gatsby-starter-ts/./node_modules/fast-png/lib-esm/helpers/signature.js","webpack://gatsby-starter-ts/./node_modules/fast-png/lib-esm/helpers/text.js","webpack://gatsby-starter-ts/./node_modules/fast-png/lib-esm/internalTypes.js","webpack://gatsby-starter-ts/./node_modules/fast-png/lib-esm/PngDecoder.js","webpack://gatsby-starter-ts/./node_modules/fast-png/lib-esm/types.js","webpack://gatsby-starter-ts/./node_modules/fast-png/lib-esm/index.js","webpack://gatsby-starter-ts/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://gatsby-starter-ts/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://gatsby-starter-ts/./node_modules/@mdx-js/react/lib/index.js","webpack://gatsby-starter-ts/./src/components/OddOneOut/OddOneOut.tsx","webpack://gatsby-starter-ts/./src/components/OddOneOut/OddOneOut.module.css","webpack://gatsby-starter-ts/./src/components/Card/Card.module.css","webpack://gatsby-starter-ts/./src/components/Card/Card.tsx","webpack://gatsby-starter-ts/./node_modules/fflate/esm/browser.js"],"sourcesContent":["function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// extracted by mini-css-extract-plugin\nexport var column = \"RootMatch-module--column--05e01\";\nexport var container = \"RootMatch-module--container--43575\";\nexport var grid = \"RootMatch-module--grid--ab760\";\nexport var item = \"RootMatch-module--item--72834\";\nexport var matched = \"RootMatch-module--matched--85f69\";\nexport var selected = \"RootMatch-module--selected--b1820\";\nexport var shake = \"RootMatch-module--shake--be9f5\";","import { useUser } from '../../context/UserContext';\nimport React, { useState, useEffect } from 'react';\nimport confetti from 'canvas-confetti';\nimport { GameProvider, useGame } from '../../context/GameContext';\nimport GameShell from '../GameUI/GameShell';\nimport * as styles from './RootMatch.module.css';\n\ninterface RootPair {\n  root: string;\n  meaning: string;\n}\n\ninterface RootMatchProps {\n  rounds: { pairs: RootPair[] }[]; // Each round has a set of pairs\n}\n\nconst RootMatchContent: React.FC<RootMatchProps> = ({ rounds }) => {\n  const { state, dispatch } = useGame();\n  const { user, updateProgress, incrementStreak } = useUser();\n\n  const currentRoundData = rounds[state.currentRound];\n\n  // Local state for the current interaction\n  const [selectedRoot, setSelectedRoot] = useState<string | null>(null);\n  const [selectedMeaning, setSelectedMeaning] = useState<string | null>(null);\n  const [matchedPairs, setMatchedPairs] = useState<string[]>([]); // Array of matched roots\n  const [mismatched, setMismatched] = useState(false);\n\n  // Reset local state on new round\n  useEffect(() => {\n    setSelectedRoot(null);\n    setSelectedMeaning(null);\n    setMatchedPairs([]);\n    setMismatched(false);\n  }, [state.currentRound]);\n\n  // Check for completion\n  useEffect(() => {\n    if (state.status === `playing` && currentRoundData) {\n      // Ensure we aren't using stale state from previous round\n      // If matchedPairs has items but they don't belong to this round, wait for reset\n      const isStale =\n        matchedPairs.length > 0 &&\n        !currentRoundData.pairs.some((p) => p.root === matchedPairs[0]);\n\n      if (isStale) return;\n\n      if (matchedPairs.length === currentRoundData.pairs.length) {\n        // Round Complete\n        confetti({\n          particleCount: 50,\n          spread: 60,\n          origin: { y: 0.6 },\n        });\n\n        // Update stats - Count a completed matching board as 5 \"words\" mastered roughly, or just 1?\n        // Let's count it as the number of pairs.\n        const pairsCount = currentRoundData.pairs.length;\n        updateProgress({ wordsMastered: user.wordsMastered + pairsCount });\n\n        // If last round\n        if (state.currentRound === rounds.length - 1) {\n          updateProgress({ labsCompleted: user.labsCompleted + 1 });\n          incrementStreak();\n        }\n\n        dispatch({\n          type: `SUBMIT_ANSWER`,\n          isCorrect: true,\n          question: `Round ${state.currentRound + 1}`,\n          userAnswer: `Matched All`,\n          correctAnswer: `Matched All`,\n        });\n\n        setTimeout(() => {\n          dispatch({ type: `NEXT_ROUND` });\n        }, 1500);\n      }\n    }\n  }, [\n    matchedPairs,\n    currentRoundData,\n    state.status,\n    dispatch,\n    state.currentRound,\n    user.wordsMastered,\n    user.labsCompleted,\n    updateProgress,\n    incrementStreak,\n    rounds.length,\n  ]);\n\n  const handleRootClick = (root: string) => {\n    if (matchedPairs.includes(root)) return;\n    setMismatched(false);\n    setSelectedRoot(root);\n    checkMatch(root, selectedMeaning);\n  };\n\n  const handleMeaningClick = (meaning: string) => {\n    // Find which root this meaning belongs to, to check if it's already matched\n    const pair = currentRoundData.pairs.find((p) => p.meaning === meaning);\n    if (!pair || matchedPairs.includes(pair.root)) return;\n\n    setMismatched(false);\n    setSelectedMeaning(meaning);\n    checkMatch(selectedRoot, meaning);\n  };\n\n  const checkMatch = (root: string | null, meaning: string | null) => {\n    if (!root || !meaning) return;\n\n    const correctPair = currentRoundData.pairs.find(\n      (p) => p.root === root && p.meaning === meaning,\n    );\n\n    if (correctPair) {\n      // Match!\n      setMatchedPairs((prev) => [...prev, root]);\n      setSelectedRoot(null);\n      setSelectedMeaning(null);\n    } else {\n      // Mismatch\n      setMismatched(true);\n      setTimeout(() => {\n        setSelectedRoot(null);\n        setSelectedMeaning(null);\n        setMismatched(false);\n      }, 500);\n    }\n  };\n\n  // Memoizing shuffled lists\n  /* eslint-disable react-hooks/exhaustive-deps */\n  const shuffledMeanings = React.useMemo(() => {\n    if (!currentRoundData) return [];\n    return [...currentRoundData.pairs].sort(() => Math.random() - 0.5);\n  }, [currentRoundData]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  if (!currentRoundData) return null;\n\n  return (\n    <GameShell\n      title=\"Root Match\"\n      description=\"Tap a Root, then tap its Meaning.\"\n      onStart={() =>\n        dispatch({ type: `START_GAME`, totalRounds: rounds.length })\n      }\n    >\n      <div className={styles.container}>\n        <div className={styles.grid}>\n          {/* Roots Column */}\n          <div className={styles.column}>\n            <h4 style={{ textAlign: `center`, marginBottom: `0.5rem` }}>\n              Roots\n            </h4>\n            {currentRoundData.pairs.map((pair) => (\n              <div\n                key={pair.root}\n                className={`\n                  ${styles.item}\n                  ${selectedRoot === pair.root ? styles.selected : ``}\n                  ${matchedPairs.includes(pair.root) ? styles.matched : ``}\n                  ${\n                    selectedRoot === pair.root && mismatched ? styles.shake : ``\n                  }\n                `}\n                onClick={() => handleRootClick(pair.root)}\n              >\n                {pair.root}\n              </div>\n            ))}\n          </div>\n\n          {/* Meanings Column */}\n          <div className={styles.column}>\n            <h4 style={{ textAlign: `center`, marginBottom: `0.5rem` }}>\n              Meanings\n            </h4>\n            {shuffledMeanings.map((pair) => (\n              <div\n                key={pair.meaning}\n                className={`\n                  ${styles.item}\n                  ${selectedMeaning === pair.meaning ? styles.selected : ``}\n                  ${matchedPairs.includes(pair.root) ? styles.matched : ``}\n                  ${\n                    selectedMeaning === pair.meaning && mismatched\n                      ? styles.shake\n                      : ``\n                  }\n                `}\n                onClick={() => handleMeaningClick(pair.meaning)}\n              >\n                {pair.meaning}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </GameShell>\n  );\n};\n\nconst RootMatch: React.FC<RootMatchProps> = (props) => (\n  <GameProvider>\n    <RootMatchContent {...props} />\n  </GameProvider>\n);\n\nexport default RootMatch;\n","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// extracted by mini-css-extract-plugin\nexport var button = \"Button-module--button--c17ef\";\nexport var danger = \"Button-module--danger--df330\";\nexport var large = \"Button-module--large--e508c\";\nexport var medium = \"Button-module--medium--16137\";\nexport var outline = \"Button-module--outline--22055\";\nexport var primary = \"Button-module--primary--2e17d\";\nexport var secondary = \"Button-module--secondary--e788d\";\nexport var small = \"Button-module--small--c0339\";","import React from 'react';\nimport * as styles from './Button.module.css';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'danger' | 'outline';\n  size?: 'small' | 'medium' | 'large';\n  children: React.ReactNode;\n}\n\nconst Button: React.FC<ButtonProps> = ({\n  variant = `primary`,\n  size = `medium`,\n  className = ``,\n  children,\n  ...props\n}) => {\n  const rootClassName = [\n    styles.button,\n    styles[variant],\n    styles[size],\n    className,\n  ]\n    .filter(Boolean)\n    .join(` `);\n\n  return (\n    <button className={rootClassName} {...props}>\n      {children}\n    </button>\n  );\n};\n\nexport default Button;\n","import React, { createContext, useReducer, useContext } from 'react';\n\n// --- Types ---\n\nexport type GameState = 'idle' | 'playing' | 'success' | 'error' | 'finished';\n\nexport interface GameHistoryItem {\n  question: string;\n  userAnswer: string;\n  isCorrect: boolean;\n  correctAnswer: string;\n}\n\nexport interface GameStateData {\n  status: GameState;\n  currentRound: number; // 0-indexed\n  score: number;\n  totalRounds: number;\n  feedbackMessage?: string;\n  history: GameHistoryItem[];\n  likedWords: Set<string>; // Words that user liked or misspelled\n}\n\ntype Action =\n  | { type: 'START_GAME'; totalRounds: number }\n  | {\n      type: 'SUBMIT_ANSWER';\n      isCorrect: boolean;\n      question: string;\n      userAnswer: string;\n      correctAnswer: string;\n    }\n  | { type: 'NEXT_ROUND' }\n  | { type: 'RESET' }\n  | { type: 'ADD_LIKED_WORD'; word: string }\n  | { type: 'REMOVE_LIKED_WORD'; word: string };\n\n// --- Reducer ---\n\nconst initialState: GameStateData = {\n  status: `idle`,\n  currentRound: 0,\n  score: 0,\n  totalRounds: 10,\n  history: [],\n  likedWords: new Set(),\n};\n\nconst gameReducer = (state: GameStateData, action: Action): GameStateData => {\n  switch (action.type) {\n    case `START_GAME`:\n      return {\n        ...initialState,\n        status: `playing`,\n        totalRounds: action.totalRounds,\n        likedWords: new Set(), // Reset liked words on new game\n      };\n\n    case `SUBMIT_ANSWER`:\n      return {\n        ...state,\n        status: action.isCorrect ? `success` : `error`,\n        score: action.isCorrect ? state.score + 1 : state.score,\n        history: [\n          ...state.history,\n          {\n            question: action.question,\n            userAnswer: action.userAnswer,\n            isCorrect: action.isCorrect,\n            correctAnswer: action.correctAnswer,\n          },\n        ],\n      };\n\n    case `NEXT_ROUND`:\n      if (state.currentRound >= state.totalRounds - 1) {\n        return { ...state, status: `finished` };\n      }\n      return {\n        ...state,\n        status: `playing`,\n        currentRound: state.currentRound + 1,\n      };\n\n    case `RESET`:\n      return initialState;\n\n    case `ADD_LIKED_WORD`: {\n      const newLikedWords = new Set(state.likedWords);\n      newLikedWords.add(action.word);\n      return { ...state, likedWords: newLikedWords };\n    }\n\n    case `REMOVE_LIKED_WORD`: {\n      const newLikedWords = new Set(state.likedWords);\n      newLikedWords.delete(action.word);\n      return { ...state, likedWords: newLikedWords };\n    }\n\n    default:\n      return state;\n  }\n};\n\n// --- Context ---\n\ninterface GameContextType {\n  state: GameStateData;\n  dispatch: React.Dispatch<Action>;\n}\n\nconst GameContext = createContext<GameContextType | undefined>(undefined);\n\nexport const GameProvider: React.FC<{ children: React.ReactNode }> = ({\n  children,\n}) => {\n  const [state, dispatch] = useReducer(gameReducer, initialState);\n  return (\n    <GameContext.Provider value={{ state, dispatch }}>\n      {children}\n    </GameContext.Provider>\n  );\n};\n\nexport const useGame = () => {\n  const context = useContext(GameContext);\n  if (!context) {\n    throw new Error(`useGame must be used within a GameProvider`);\n  }\n  return context;\n};\n","function _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// extracted by mini-css-extract-plugin\nexport var audio = \"AudioPlayer-module--audio--22f25\";\nexport var container = \"AudioPlayer-module--container--4a418\";\nexport var title = \"AudioPlayer-module--title--7378f\";","import React from 'react';\nimport * as styles from './AudioPlayer.module.css';\n\ninterface AudioPlayerProps {\n  url: string;\n  title?: string;\n}\n\nconst AudioPlayer: React.FC<AudioPlayerProps> = ({ url, title }) => {\n  return (\n    <div className={styles.container}>\n      {title && <h3 className={styles.title}>{title}</h3>}\n      <audio controls className={styles.audio}>\n        <source src={url} type=\"audio/mpeg\" />\n        Your browser does not support the audio element.\n      </audio>\n    </div>\n  );\n};\n\nexport default AudioPlayer;\n","import { useState, useEffect, useCallback } from 'react';\nimport { useUser } from '../context/UserContext';\n\nexport const useTextToSpeech = () => {\n  /* eslint-disable no-undef */\n  const [voices, setVoices] = useState<SpeechSynthesisVoice[]>([]);\n  /* eslint-enable no-undef */\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [supported, setSupported] = useState(false);\n\n  // Access UserContext (assumes provider exists)\n  const { user } = useUser();\n  const userVoiceURI = user?.voiceURI;\n\n  useEffect(() => {\n    if (typeof window !== `undefined` && `speechSynthesis` in window) {\n      setSupported(true);\n\n      const updateVoices = () => {\n        setVoices(window.speechSynthesis.getVoices());\n      };\n\n      updateVoices();\n      window.speechSynthesis.onvoiceschanged = updateVoices;\n    }\n  }, []);\n\n  const speak = useCallback(\n    (text: string, rate = 0.9) => {\n      if (!supported) return;\n\n      window.speechSynthesis.cancel(); // Stop any current speech\n\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.rate = rate; // Slightly slower is better for spelling\n      utterance.pitch = 1;\n\n      // Select voice: User preference > Native English > First English\n      let selectedVoice;\n\n      if (userVoiceURI) {\n        selectedVoice = voices.find((v) => v.voiceURI === userVoiceURI);\n      }\n\n      if (!selectedVoice) {\n        selectedVoice =\n          voices.find((v) => v.lang.startsWith(`en`) && v.localService) ||\n          voices.find((v) => v.lang.startsWith(`en`));\n      }\n\n      if (selectedVoice) {\n        utterance.voice = selectedVoice;\n      }\n\n      utterance.onstart = () => setIsSpeaking(true);\n      utterance.onend = () => setIsSpeaking(false);\n      utterance.onerror = () => setIsSpeaking(false);\n\n      window.speechSynthesis.speak(utterance);\n    },\n    [supported, voices, userVoiceURI],\n  );\n\n  const cancel = useCallback(() => {\n    if (supported) {\n      window.speechSynthesis.cancel();\n      setIsSpeaking(false);\n    }\n  }, [supported]);\n\n  return { speak, cancel, isSpeaking, supported, voices };\n};\n","// extracted by mini-css-extract-plugin\nexport var activeQuestion = \"TypeTheWord-module--activeQuestion--4bd1e\";\nexport var answerDisplay = \"TypeTheWord-module--answerDisplay--f77c2\";\nexport var answerLabel = \"TypeTheWord-module--answerLabel--20d34\";\nexport var audioButtonLarge = \"TypeTheWord-module--audioButtonLarge--5e5d9\";\nexport var container = \"TypeTheWord-module--container--36b52\";\nexport var correct = \"TypeTheWord-module--correct--1fd91\";\nexport var detailActions = \"TypeTheWord-module--detailActions--97fa0\";\nexport var detailCard = \"TypeTheWord-module--detailCard--cb75c\";\nexport var detailGrid = \"TypeTheWord-module--detailGrid--57d72\";\nexport var detailItem = \"TypeTheWord-module--detailItem--42084\";\nexport var detailLabel = \"TypeTheWord-module--detailLabel--b10ce\";\nexport var detailPronunciation = \"TypeTheWord-module--detailPronunciation--88d9d\";\nexport var detailWord = \"TypeTheWord-module--detailWord--47668\";\nexport var error = \"TypeTheWord-module--error--d0ede\";\nexport var feedback = \"TypeTheWord-module--feedback--46af9\";\nexport var gameControls = \"TypeTheWord-module--gameControls--849a8\";\nexport var hintsContainer = \"TypeTheWord-module--hintsContainer--6ee82\";\nexport var hintsHeader = \"TypeTheWord-module--hintsHeader--3a524\";\nexport var hudContainer = \"TypeTheWord-module--hudContainer--f599d\";\nexport var hudItem = \"TypeTheWord-module--hudItem--72ce7\";\nexport var hudLabel = \"TypeTheWord-module--hudLabel--49f8d\";\nexport var hudTotal = \"TypeTheWord-module--hudTotal--b9578\";\nexport var hudValue = \"TypeTheWord-module--hudValue--ea0a6\";\nexport var input = \"TypeTheWord-module--input--0252a\";\nexport var inputGroup = \"TypeTheWord-module--inputGroup--aa9c4\";\nexport var playArea = \"TypeTheWord-module--playArea--d7a39\";\nexport var popIn = \"TypeTheWord-module--popIn--a5d5d\";\nexport var progress = \"TypeTheWord-module--progress--d2ecf\";\nexport var questionBtn = \"TypeTheWord-module--questionBtn--0b76f\";\nexport var questionsGrid = \"TypeTheWord-module--questionsGrid--36f07\";\nexport var shake = \"TypeTheWord-module--shake--0c146\";\nexport var slideDown = \"TypeTheWord-module--slideDown--b85d4\";\nexport var success = \"TypeTheWord-module--success--5422a\";\nexport var summaryTable = \"TypeTheWord-module--summaryTable--c18ff\";","import { useUser } from '../../context/UserContext';\nimport React from 'react';\nimport confetti from 'canvas-confetti';\nimport { GameProvider, useGame } from '../../context/GameContext';\nimport GameShell from '../GameUI/GameShell';\nimport Button from '../Button/Button';\nimport * as styles from '../TypeTheWord/TypeTheWord.module.css'; // Reusing styles\n\ninterface OriginWord {\n  word: string;\n  origin: string; // The correct answer\n  options: string[]; // 4 choices\n}\n\ninterface PickTheOriginProps {\n  words: OriginWord[];\n}\n\nconst PickTheOriginContent: React.FC<PickTheOriginProps> = ({ words }) => {\n  const { state, dispatch } = useGame();\n  const { user, updateProgress, incrementStreak } = useUser();\n  const currentWord = words[state.currentRound];\n\n  const handleChoice = (choice: string) => {\n    if (state.status !== `playing`) return;\n\n    const isCorrect = choice === currentWord.origin;\n\n    dispatch({\n      type: `SUBMIT_ANSWER`,\n      isCorrect,\n      question: currentWord.word,\n      userAnswer: choice,\n      correctAnswer: currentWord.origin,\n    });\n\n    if (isCorrect) {\n      confetti({\n        particleCount: 50,\n        spread: 60,\n        origin: { y: 0.7 },\n      });\n\n      // Update stats\n      updateProgress({ wordsMastered: user.wordsMastered + 1 });\n\n      // Check if this is the last round\n      if (state.currentRound === words.length - 1) {\n        updateProgress({ labsCompleted: user.labsCompleted + 1 });\n        incrementStreak();\n      }\n    }\n\n    // Auto advance after short delay\n    setTimeout(() => {\n      dispatch({ type: `NEXT_ROUND` });\n    }, 1500);\n  };\n\n  if (!currentWord) return null;\n\n  return (\n    <GameShell\n      title=\"Pick The Origin\"\n      description=\"Can you guess the language of origin?\"\n      onStart={() =>\n        dispatch({ type: `START_GAME`, totalRounds: words.length })\n      }\n    >\n      <div className={styles.playArea}>\n        <h3 style={{ fontSize: `2rem`, margin: `1rem 0` }}>\n          {currentWord.word}\n        </h3>\n\n        <div\n          style={{\n            display: `grid`,\n            gridTemplateColumns: `1fr 1fr`,\n            gap: `1rem`,\n            width: `100%`,\n          }}\n        >\n          {currentWord.options.map((option) => {\n            let btnVariant: 'secondary' | 'primary' | 'danger' = `secondary`;\n            // If we answered, show result\n            if (state.status === `success` || state.status === `error`) {\n              if (option === currentWord.origin)\n                btnVariant = `primary`; // Show correct\n              else if (\n                option !== currentWord.origin &&\n                state.status === `error`\n              )\n                btnVariant = `secondary`; // Keep others neutral\n              // If this was the wrong choice user picked\n              // We don't track *which* wrong choice in history easily here without local state,\n              // but for simplicity we rely on the primary indicating the right answer.\n            }\n\n            return (\n              <Button\n                key={option}\n                variant={btnVariant}\n                onClick={() => handleChoice(option)}\n                disabled={state.status !== `playing`}\n              >\n                {option}\n              </Button>\n            );\n          })}\n        </div>\n\n        <div\n          className={`${styles.feedback} ${\n            state.status !== `playing` ? styles[state.status] : ``\n          }`}\n        >\n          {state.status === `success` && `Correct!`}\n          {state.status === `error` &&\n            `Incorrect. It was ${currentWord.origin}.`}\n        </div>\n      </div>\n    </GameShell>\n  );\n};\n\nconst PickTheOrigin: React.FC<PickTheOriginProps> = (props) => (\n  <GameProvider>\n    <PickTheOriginContent {...props} />\n  </GameProvider>\n);\n\nexport default PickTheOrigin;\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// canvas-confetti v1.9.4 built on 2025-10-25T05:14:56.640Z\nvar module = {};\n\n// source content\n/* globals Map */\n\n(function main(global, module, isWorker, workerSize) {\n  var canUseWorker = !!(\n    global.Worker &&\n    global.Blob &&\n    global.Promise &&\n    global.OffscreenCanvas &&\n    global.OffscreenCanvasRenderingContext2D &&\n    global.HTMLCanvasElement &&\n    global.HTMLCanvasElement.prototype.transferControlToOffscreen &&\n    global.URL &&\n    global.URL.createObjectURL);\n\n  var canUsePaths = typeof Path2D === 'function' && typeof DOMMatrix === 'function';\n  var canDrawBitmap = (function () {\n    // this mostly supports ssr\n    if (!global.OffscreenCanvas) {\n      return false;\n    }\n\n    try {\n      var canvas = new OffscreenCanvas(1, 1);\n      var ctx = canvas.getContext('2d');\n      ctx.fillRect(0, 0, 1, 1);\n      var bitmap = canvas.transferToImageBitmap();\n      ctx.createPattern(bitmap, 'no-repeat');\n    } catch (e) {\n      return false;\n    }\n\n    return true;\n  })();\n\n  function noop() {}\n\n  // create a promise if it exists, otherwise, just\n  // call the function directly\n  function promise(func) {\n    var ModulePromise = module.exports.Promise;\n    var Prom = ModulePromise !== void 0 ? ModulePromise : global.Promise;\n\n    if (typeof Prom === 'function') {\n      return new Prom(func);\n    }\n\n    func(noop, noop);\n\n    return null;\n  }\n\n  var bitmapMapper = (function (skipTransform, map) {\n    // see https://github.com/catdad/canvas-confetti/issues/209\n    // creating canvases is actually pretty expensive, so we should create a\n    // 1:1 map for bitmap:canvas, so that we can animate the confetti in\n    // a performant manner, but also not store them forever so that we don't\n    // have a memory leak\n    return {\n      transform: function(bitmap) {\n        if (skipTransform) {\n          return bitmap;\n        }\n\n        if (map.has(bitmap)) {\n          return map.get(bitmap);\n        }\n\n        var canvas = new OffscreenCanvas(bitmap.width, bitmap.height);\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(bitmap, 0, 0);\n\n        map.set(bitmap, canvas);\n\n        return canvas;\n      },\n      clear: function () {\n        map.clear();\n      }\n    };\n  })(canDrawBitmap, new Map());\n\n  var raf = (function () {\n    var TIME = Math.floor(1000 / 60);\n    var frame, cancel;\n    var frames = {};\n    var lastFrameTime = 0;\n\n    if (typeof requestAnimationFrame === 'function' && typeof cancelAnimationFrame === 'function') {\n      frame = function (cb) {\n        var id = Math.random();\n\n        frames[id] = requestAnimationFrame(function onFrame(time) {\n          if (lastFrameTime === time || lastFrameTime + TIME - 1 < time) {\n            lastFrameTime = time;\n            delete frames[id];\n\n            cb();\n          } else {\n            frames[id] = requestAnimationFrame(onFrame);\n          }\n        });\n\n        return id;\n      };\n      cancel = function (id) {\n        if (frames[id]) {\n          cancelAnimationFrame(frames[id]);\n        }\n      };\n    } else {\n      frame = function (cb) {\n        return setTimeout(cb, TIME);\n      };\n      cancel = function (timer) {\n        return clearTimeout(timer);\n      };\n    }\n\n    return { frame: frame, cancel: cancel };\n  }());\n\n  var getWorker = (function () {\n    var worker;\n    var prom;\n    var resolves = {};\n\n    function decorate(worker) {\n      function execute(options, callback) {\n        worker.postMessage({ options: options || {}, callback: callback });\n      }\n      worker.init = function initWorker(canvas) {\n        var offscreen = canvas.transferControlToOffscreen();\n        worker.postMessage({ canvas: offscreen }, [offscreen]);\n      };\n\n      worker.fire = function fireWorker(options, size, done) {\n        if (prom) {\n          execute(options, null);\n          return prom;\n        }\n\n        var id = Math.random().toString(36).slice(2);\n\n        prom = promise(function (resolve) {\n          function workerDone(msg) {\n            if (msg.data.callback !== id) {\n              return;\n            }\n\n            delete resolves[id];\n            worker.removeEventListener('message', workerDone);\n\n            prom = null;\n\n            bitmapMapper.clear();\n\n            done();\n            resolve();\n          }\n\n          worker.addEventListener('message', workerDone);\n          execute(options, id);\n\n          resolves[id] = workerDone.bind(null, { data: { callback: id }});\n        });\n\n        return prom;\n      };\n\n      worker.reset = function resetWorker() {\n        worker.postMessage({ reset: true });\n\n        for (var id in resolves) {\n          resolves[id]();\n          delete resolves[id];\n        }\n      };\n    }\n\n    return function () {\n      if (worker) {\n        return worker;\n      }\n\n      if (!isWorker && canUseWorker) {\n        var code = [\n          'var CONFETTI, SIZE = {}, module = {};',\n          '(' + main.toString() + ')(this, module, true, SIZE);',\n          'onmessage = function(msg) {',\n          '  if (msg.data.options) {',\n          '    CONFETTI(msg.data.options).then(function () {',\n          '      if (msg.data.callback) {',\n          '        postMessage({ callback: msg.data.callback });',\n          '      }',\n          '    });',\n          '  } else if (msg.data.reset) {',\n          '    CONFETTI && CONFETTI.reset();',\n          '  } else if (msg.data.resize) {',\n          '    SIZE.width = msg.data.resize.width;',\n          '    SIZE.height = msg.data.resize.height;',\n          '  } else if (msg.data.canvas) {',\n          '    SIZE.width = msg.data.canvas.width;',\n          '    SIZE.height = msg.data.canvas.height;',\n          '    CONFETTI = module.exports.create(msg.data.canvas);',\n          '  }',\n          '}',\n        ].join('\\n');\n        try {\n          worker = new Worker(URL.createObjectURL(new Blob([code])));\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          typeof console !== 'undefined' && typeof console.warn === 'function' ? console.warn(' Could not load worker', e) : null;\n\n          return null;\n        }\n\n        decorate(worker);\n      }\n\n      return worker;\n    };\n  })();\n\n  var defaults = {\n    particleCount: 50,\n    angle: 90,\n    spread: 45,\n    startVelocity: 45,\n    decay: 0.9,\n    gravity: 1,\n    drift: 0,\n    ticks: 200,\n    x: 0.5,\n    y: 0.5,\n    shapes: ['square', 'circle'],\n    zIndex: 100,\n    colors: [\n      '#26ccff',\n      '#a25afd',\n      '#ff5e7e',\n      '#88ff5a',\n      '#fcff42',\n      '#ffa62d',\n      '#ff36ff'\n    ],\n    // probably should be true, but back-compat\n    disableForReducedMotion: false,\n    scalar: 1\n  };\n\n  function convert(val, transform) {\n    return transform ? transform(val) : val;\n  }\n\n  function isOk(val) {\n    return !(val === null || val === undefined);\n  }\n\n  function prop(options, name, transform) {\n    return convert(\n      options && isOk(options[name]) ? options[name] : defaults[name],\n      transform\n    );\n  }\n\n  function onlyPositiveInt(number){\n    return number < 0 ? 0 : Math.floor(number);\n  }\n\n  function randomInt(min, max) {\n    // [min, max)\n    return Math.floor(Math.random() * (max - min)) + min;\n  }\n\n  function toDecimal(str) {\n    return parseInt(str, 16);\n  }\n\n  function colorsToRgb(colors) {\n    return colors.map(hexToRgb);\n  }\n\n  function hexToRgb(str) {\n    var val = String(str).replace(/[^0-9a-f]/gi, '');\n\n    if (val.length < 6) {\n        val = val[0]+val[0]+val[1]+val[1]+val[2]+val[2];\n    }\n\n    return {\n      r: toDecimal(val.substring(0,2)),\n      g: toDecimal(val.substring(2,4)),\n      b: toDecimal(val.substring(4,6))\n    };\n  }\n\n  function getOrigin(options) {\n    var origin = prop(options, 'origin', Object);\n    origin.x = prop(origin, 'x', Number);\n    origin.y = prop(origin, 'y', Number);\n\n    return origin;\n  }\n\n  function setCanvasWindowSize(canvas) {\n    canvas.width = document.documentElement.clientWidth;\n    canvas.height = document.documentElement.clientHeight;\n  }\n\n  function setCanvasRectSize(canvas) {\n    var rect = canvas.getBoundingClientRect();\n    canvas.width = rect.width;\n    canvas.height = rect.height;\n  }\n\n  function getCanvas(zIndex) {\n    var canvas = document.createElement('canvas');\n\n    canvas.style.position = 'fixed';\n    canvas.style.top = '0px';\n    canvas.style.left = '0px';\n    canvas.style.pointerEvents = 'none';\n    canvas.style.zIndex = zIndex;\n\n    return canvas;\n  }\n\n  function ellipse(context, x, y, radiusX, radiusY, rotation, startAngle, endAngle, antiClockwise) {\n    context.save();\n    context.translate(x, y);\n    context.rotate(rotation);\n    context.scale(radiusX, radiusY);\n    context.arc(0, 0, 1, startAngle, endAngle, antiClockwise);\n    context.restore();\n  }\n\n  function randomPhysics(opts) {\n    var radAngle = opts.angle * (Math.PI / 180);\n    var radSpread = opts.spread * (Math.PI / 180);\n\n    return {\n      x: opts.x,\n      y: opts.y,\n      wobble: Math.random() * 10,\n      wobbleSpeed: Math.min(0.11, Math.random() * 0.1 + 0.05),\n      velocity: (opts.startVelocity * 0.5) + (Math.random() * opts.startVelocity),\n      angle2D: -radAngle + ((0.5 * radSpread) - (Math.random() * radSpread)),\n      tiltAngle: (Math.random() * (0.75 - 0.25) + 0.25) * Math.PI,\n      color: opts.color,\n      shape: opts.shape,\n      tick: 0,\n      totalTicks: opts.ticks,\n      decay: opts.decay,\n      drift: opts.drift,\n      random: Math.random() + 2,\n      tiltSin: 0,\n      tiltCos: 0,\n      wobbleX: 0,\n      wobbleY: 0,\n      gravity: opts.gravity * 3,\n      ovalScalar: 0.6,\n      scalar: opts.scalar,\n      flat: opts.flat\n    };\n  }\n\n  function updateFetti(context, fetti) {\n    fetti.x += Math.cos(fetti.angle2D) * fetti.velocity + fetti.drift;\n    fetti.y += Math.sin(fetti.angle2D) * fetti.velocity + fetti.gravity;\n    fetti.velocity *= fetti.decay;\n\n    if (fetti.flat) {\n      fetti.wobble = 0;\n      fetti.wobbleX = fetti.x + (10 * fetti.scalar);\n      fetti.wobbleY = fetti.y + (10 * fetti.scalar);\n\n      fetti.tiltSin = 0;\n      fetti.tiltCos = 0;\n      fetti.random = 1;\n    } else {\n      fetti.wobble += fetti.wobbleSpeed;\n      fetti.wobbleX = fetti.x + ((10 * fetti.scalar) * Math.cos(fetti.wobble));\n      fetti.wobbleY = fetti.y + ((10 * fetti.scalar) * Math.sin(fetti.wobble));\n\n      fetti.tiltAngle += 0.1;\n      fetti.tiltSin = Math.sin(fetti.tiltAngle);\n      fetti.tiltCos = Math.cos(fetti.tiltAngle);\n      fetti.random = Math.random() + 2;\n    }\n\n    var progress = (fetti.tick++) / fetti.totalTicks;\n\n    var x1 = fetti.x + (fetti.random * fetti.tiltCos);\n    var y1 = fetti.y + (fetti.random * fetti.tiltSin);\n    var x2 = fetti.wobbleX + (fetti.random * fetti.tiltCos);\n    var y2 = fetti.wobbleY + (fetti.random * fetti.tiltSin);\n\n    context.fillStyle = 'rgba(' + fetti.color.r + ', ' + fetti.color.g + ', ' + fetti.color.b + ', ' + (1 - progress) + ')';\n\n    context.beginPath();\n\n    if (canUsePaths && fetti.shape.type === 'path' && typeof fetti.shape.path === 'string' && Array.isArray(fetti.shape.matrix)) {\n      context.fill(transformPath2D(\n        fetti.shape.path,\n        fetti.shape.matrix,\n        fetti.x,\n        fetti.y,\n        Math.abs(x2 - x1) * 0.1,\n        Math.abs(y2 - y1) * 0.1,\n        Math.PI / 10 * fetti.wobble\n      ));\n    } else if (fetti.shape.type === 'bitmap') {\n      var rotation = Math.PI / 10 * fetti.wobble;\n      var scaleX = Math.abs(x2 - x1) * 0.1;\n      var scaleY = Math.abs(y2 - y1) * 0.1;\n      var width = fetti.shape.bitmap.width * fetti.scalar;\n      var height = fetti.shape.bitmap.height * fetti.scalar;\n\n      var matrix = new DOMMatrix([\n        Math.cos(rotation) * scaleX,\n        Math.sin(rotation) * scaleX,\n        -Math.sin(rotation) * scaleY,\n        Math.cos(rotation) * scaleY,\n        fetti.x,\n        fetti.y\n      ]);\n\n      // apply the transform matrix from the confetti shape\n      matrix.multiplySelf(new DOMMatrix(fetti.shape.matrix));\n\n      var pattern = context.createPattern(bitmapMapper.transform(fetti.shape.bitmap), 'no-repeat');\n      pattern.setTransform(matrix);\n\n      context.globalAlpha = (1 - progress);\n      context.fillStyle = pattern;\n      context.fillRect(\n        fetti.x - (width / 2),\n        fetti.y - (height / 2),\n        width,\n        height\n      );\n      context.globalAlpha = 1;\n    } else if (fetti.shape === 'circle') {\n      context.ellipse ?\n        context.ellipse(fetti.x, fetti.y, Math.abs(x2 - x1) * fetti.ovalScalar, Math.abs(y2 - y1) * fetti.ovalScalar, Math.PI / 10 * fetti.wobble, 0, 2 * Math.PI) :\n        ellipse(context, fetti.x, fetti.y, Math.abs(x2 - x1) * fetti.ovalScalar, Math.abs(y2 - y1) * fetti.ovalScalar, Math.PI / 10 * fetti.wobble, 0, 2 * Math.PI);\n    } else if (fetti.shape === 'star') {\n      var rot = Math.PI / 2 * 3;\n      var innerRadius = 4 * fetti.scalar;\n      var outerRadius = 8 * fetti.scalar;\n      var x = fetti.x;\n      var y = fetti.y;\n      var spikes = 5;\n      var step = Math.PI / spikes;\n\n      while (spikes--) {\n        x = fetti.x + Math.cos(rot) * outerRadius;\n        y = fetti.y + Math.sin(rot) * outerRadius;\n        context.lineTo(x, y);\n        rot += step;\n\n        x = fetti.x + Math.cos(rot) * innerRadius;\n        y = fetti.y + Math.sin(rot) * innerRadius;\n        context.lineTo(x, y);\n        rot += step;\n      }\n    } else {\n      context.moveTo(Math.floor(fetti.x), Math.floor(fetti.y));\n      context.lineTo(Math.floor(fetti.wobbleX), Math.floor(y1));\n      context.lineTo(Math.floor(x2), Math.floor(y2));\n      context.lineTo(Math.floor(x1), Math.floor(fetti.wobbleY));\n    }\n\n    context.closePath();\n    context.fill();\n\n    return fetti.tick < fetti.totalTicks;\n  }\n\n  function animate(canvas, fettis, resizer, size, done) {\n    var animatingFettis = fettis.slice();\n    var context = canvas.getContext('2d');\n    var animationFrame;\n    var destroy;\n\n    var prom = promise(function (resolve) {\n      function onDone() {\n        animationFrame = destroy = null;\n\n        context.clearRect(0, 0, size.width, size.height);\n        bitmapMapper.clear();\n\n        done();\n        resolve();\n      }\n\n      function update() {\n        if (isWorker && !(size.width === workerSize.width && size.height === workerSize.height)) {\n          size.width = canvas.width = workerSize.width;\n          size.height = canvas.height = workerSize.height;\n        }\n\n        if (!size.width && !size.height) {\n          resizer(canvas);\n          size.width = canvas.width;\n          size.height = canvas.height;\n        }\n\n        context.clearRect(0, 0, size.width, size.height);\n\n        animatingFettis = animatingFettis.filter(function (fetti) {\n          return updateFetti(context, fetti);\n        });\n\n        if (animatingFettis.length) {\n          animationFrame = raf.frame(update);\n        } else {\n          onDone();\n        }\n      }\n\n      animationFrame = raf.frame(update);\n      destroy = onDone;\n    });\n\n    return {\n      addFettis: function (fettis) {\n        animatingFettis = animatingFettis.concat(fettis);\n\n        return prom;\n      },\n      canvas: canvas,\n      promise: prom,\n      reset: function () {\n        if (animationFrame) {\n          raf.cancel(animationFrame);\n        }\n\n        if (destroy) {\n          destroy();\n        }\n      }\n    };\n  }\n\n  function confettiCannon(canvas, globalOpts) {\n    var isLibCanvas = !canvas;\n    var allowResize = !!prop(globalOpts || {}, 'resize');\n    var hasResizeEventRegistered = false;\n    var globalDisableForReducedMotion = prop(globalOpts, 'disableForReducedMotion', Boolean);\n    var shouldUseWorker = canUseWorker && !!prop(globalOpts || {}, 'useWorker');\n    var worker = shouldUseWorker ? getWorker() : null;\n    var resizer = isLibCanvas ? setCanvasWindowSize : setCanvasRectSize;\n    var initialized = (canvas && worker) ? !!canvas.__confetti_initialized : false;\n    var preferLessMotion = typeof matchMedia === 'function' && matchMedia('(prefers-reduced-motion)').matches;\n    var animationObj;\n\n    function fireLocal(options, size, done) {\n      var particleCount = prop(options, 'particleCount', onlyPositiveInt);\n      var angle = prop(options, 'angle', Number);\n      var spread = prop(options, 'spread', Number);\n      var startVelocity = prop(options, 'startVelocity', Number);\n      var decay = prop(options, 'decay', Number);\n      var gravity = prop(options, 'gravity', Number);\n      var drift = prop(options, 'drift', Number);\n      var colors = prop(options, 'colors', colorsToRgb);\n      var ticks = prop(options, 'ticks', Number);\n      var shapes = prop(options, 'shapes');\n      var scalar = prop(options, 'scalar');\n      var flat = !!prop(options, 'flat');\n      var origin = getOrigin(options);\n\n      var temp = particleCount;\n      var fettis = [];\n\n      var startX = canvas.width * origin.x;\n      var startY = canvas.height * origin.y;\n\n      while (temp--) {\n        fettis.push(\n          randomPhysics({\n            x: startX,\n            y: startY,\n            angle: angle,\n            spread: spread,\n            startVelocity: startVelocity,\n            color: colors[temp % colors.length],\n            shape: shapes[randomInt(0, shapes.length)],\n            ticks: ticks,\n            decay: decay,\n            gravity: gravity,\n            drift: drift,\n            scalar: scalar,\n            flat: flat\n          })\n        );\n      }\n\n      // if we have a previous canvas already animating,\n      // add to it\n      if (animationObj) {\n        return animationObj.addFettis(fettis);\n      }\n\n      animationObj = animate(canvas, fettis, resizer, size , done);\n\n      return animationObj.promise;\n    }\n\n    function fire(options) {\n      var disableForReducedMotion = globalDisableForReducedMotion || prop(options, 'disableForReducedMotion', Boolean);\n      var zIndex = prop(options, 'zIndex', Number);\n\n      if (disableForReducedMotion && preferLessMotion) {\n        return promise(function (resolve) {\n          resolve();\n        });\n      }\n\n      if (isLibCanvas && animationObj) {\n        // use existing canvas from in-progress animation\n        canvas = animationObj.canvas;\n      } else if (isLibCanvas && !canvas) {\n        // create and initialize a new canvas\n        canvas = getCanvas(zIndex);\n        document.body.appendChild(canvas);\n      }\n\n      if (allowResize && !initialized) {\n        // initialize the size of a user-supplied canvas\n        resizer(canvas);\n      }\n\n      var size = {\n        width: canvas.width,\n        height: canvas.height\n      };\n\n      if (worker && !initialized) {\n        worker.init(canvas);\n      }\n\n      initialized = true;\n\n      if (worker) {\n        canvas.__confetti_initialized = true;\n      }\n\n      function onResize() {\n        if (worker) {\n          // TODO this really shouldn't be immediate, because it is expensive\n          var obj = {\n            getBoundingClientRect: function () {\n              if (!isLibCanvas) {\n                return canvas.getBoundingClientRect();\n              }\n            }\n          };\n\n          resizer(obj);\n\n          worker.postMessage({\n            resize: {\n              width: obj.width,\n              height: obj.height\n            }\n          });\n          return;\n        }\n\n        // don't actually query the size here, since this\n        // can execute frequently and rapidly\n        size.width = size.height = null;\n      }\n\n      function done() {\n        animationObj = null;\n\n        if (allowResize) {\n          hasResizeEventRegistered = false;\n          global.removeEventListener('resize', onResize);\n        }\n\n        if (isLibCanvas && canvas) {\n          if (document.body.contains(canvas)) {\n            document.body.removeChild(canvas);\n          }\n          canvas = null;\n          initialized = false;\n        }\n      }\n\n      if (allowResize && !hasResizeEventRegistered) {\n        hasResizeEventRegistered = true;\n        global.addEventListener('resize', onResize, false);\n      }\n\n      if (worker) {\n        return worker.fire(options, size, done);\n      }\n\n      return fireLocal(options, size, done);\n    }\n\n    fire.reset = function () {\n      if (worker) {\n        worker.reset();\n      }\n\n      if (animationObj) {\n        animationObj.reset();\n      }\n    };\n\n    return fire;\n  }\n\n  // Make default export lazy to defer worker creation until called.\n  var defaultFire;\n  function getDefaultFire() {\n    if (!defaultFire) {\n      defaultFire = confettiCannon(null, { useWorker: true, resize: true });\n    }\n    return defaultFire;\n  }\n\n  function transformPath2D(pathString, pathMatrix, x, y, scaleX, scaleY, rotation) {\n    var path2d = new Path2D(pathString);\n\n    var t1 = new Path2D();\n    t1.addPath(path2d, new DOMMatrix(pathMatrix));\n\n    var t2 = new Path2D();\n    // see https://developer.mozilla.org/en-US/docs/Web/API/DOMMatrix/DOMMatrix\n    t2.addPath(t1, new DOMMatrix([\n      Math.cos(rotation) * scaleX,\n      Math.sin(rotation) * scaleX,\n      -Math.sin(rotation) * scaleY,\n      Math.cos(rotation) * scaleY,\n      x,\n      y\n    ]));\n\n    return t2;\n  }\n\n  function shapeFromPath(pathData) {\n    if (!canUsePaths) {\n      throw new Error('path confetti are not supported in this browser');\n    }\n\n    var path, matrix;\n\n    if (typeof pathData === 'string') {\n      path = pathData;\n    } else {\n      path = pathData.path;\n      matrix = pathData.matrix;\n    }\n\n    var path2d = new Path2D(path);\n    var tempCanvas = document.createElement('canvas');\n    var tempCtx = tempCanvas.getContext('2d');\n\n    if (!matrix) {\n      // attempt to figure out the width of the path, up to 1000x1000\n      var maxSize = 1000;\n      var minX = maxSize;\n      var minY = maxSize;\n      var maxX = 0;\n      var maxY = 0;\n      var width, height;\n\n      // do some line skipping... this is faster than checking\n      // every pixel and will be mostly still correct\n      for (var x = 0; x < maxSize; x += 2) {\n        for (var y = 0; y < maxSize; y += 2) {\n          if (tempCtx.isPointInPath(path2d, x, y, 'nonzero')) {\n            minX = Math.min(minX, x);\n            minY = Math.min(minY, y);\n            maxX = Math.max(maxX, x);\n            maxY = Math.max(maxY, y);\n          }\n        }\n      }\n\n      width = maxX - minX;\n      height = maxY - minY;\n\n      var maxDesiredSize = 10;\n      var scale = Math.min(maxDesiredSize/width, maxDesiredSize/height);\n\n      matrix = [\n        scale, 0, 0, scale,\n        -Math.round((width/2) + minX) * scale,\n        -Math.round((height/2) + minY) * scale\n      ];\n    }\n\n    return {\n      type: 'path',\n      path: path,\n      matrix: matrix\n    };\n  }\n\n  function shapeFromText(textData) {\n    var text,\n        scalar = 1,\n        color = '#000000',\n        // see https://nolanlawson.com/2022/04/08/the-struggle-of-using-native-emoji-on-the-web/\n        fontFamily = '\"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\", \"EmojiOne Color\", \"Android Emoji\", \"Twemoji Mozilla\", \"system emoji\", sans-serif';\n\n    if (typeof textData === 'string') {\n      text = textData;\n    } else {\n      text = textData.text;\n      scalar = 'scalar' in textData ? textData.scalar : scalar;\n      fontFamily = 'fontFamily' in textData ? textData.fontFamily : fontFamily;\n      color = 'color' in textData ? textData.color : color;\n    }\n\n    // all other confetti are 10 pixels,\n    // so this pixel size is the de-facto 100% scale confetti\n    var fontSize = 10 * scalar;\n    var font = '' + fontSize + 'px ' + fontFamily;\n\n    var canvas = new OffscreenCanvas(fontSize, fontSize);\n    var ctx = canvas.getContext('2d');\n\n    ctx.font = font;\n    var size = ctx.measureText(text);\n    var width = Math.ceil(size.actualBoundingBoxRight + size.actualBoundingBoxLeft);\n    var height = Math.ceil(size.actualBoundingBoxAscent + size.actualBoundingBoxDescent);\n\n    var padding = 2;\n    var x = size.actualBoundingBoxLeft + padding;\n    var y = size.actualBoundingBoxAscent + padding;\n    width += padding + padding;\n    height += padding + padding;\n\n    canvas = new OffscreenCanvas(width, height);\n    ctx = canvas.getContext('2d');\n    ctx.font = font;\n    ctx.fillStyle = color;\n\n    ctx.fillText(text, x, y);\n\n    var scale = 1 / scalar;\n\n    return {\n      type: 'bitmap',\n      // TODO these probably need to be transfered for workers\n      bitmap: canvas.transferToImageBitmap(),\n      matrix: [scale, 0, 0, scale, -width * scale / 2, -height * scale / 2]\n    };\n  }\n\n  module.exports = function() {\n    return getDefaultFire().apply(this, arguments);\n  };\n  module.exports.reset = function() {\n    getDefaultFire().reset();\n  };\n  module.exports.create = confettiCannon;\n  module.exports.shapeFromPath = shapeFromPath;\n  module.exports.shapeFromText = shapeFromText;\n}((function () {\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n\n  return this || {};\n})(), module, false));\n\n// end source content\n\nexport default module.exports;\nexport var create = module.exports.create;\n","// extracted by mini-css-extract-plugin\nexport var brand = \"Header-module--brand--cd1e0\";\nexport var hamburger = \"Header-module--hamburger--e903c\";\nexport var header = \"Header-module--header--3c58a\";\nexport var link = \"Header-module--link--81fac\";\nexport var linkActive = \"Header-module--linkActive--0253b\";\nexport var nav = \"Header-module--nav--2a51c\";\nexport var open = \"Header-module--open--2e3a8\";","import React from 'react';\nimport { Link } from 'gatsby';\nimport * as styles from './Header.module.css';\n\nconst Header: React.FC = () => {\n  const [isMenuOpen, setIsMenuOpen] = React.useState(false);\n\n  const toggleMenu = () => {\n    setIsMenuOpen(!isMenuOpen);\n  };\n\n  return (\n    <header className={styles.header}>\n      <Link to=\"/\" className={styles.brand}>\n        <span></span>\n        <span>Spelling Bee Toolbox</span>\n      </Link>\n\n      <button\n        className={styles.hamburger}\n        onClick={toggleMenu}\n        aria-label=\"Toggle navigation\"\n      >\n        <span />\n        <span />\n        <span />\n      </button>\n\n      <nav className={`${styles.nav} ${isMenuOpen ? styles.open : ``}`}>\n        <Link\n          to=\"/\"\n          className={styles.link}\n          activeClassName={styles.linkActive}\n          onClick={() => setIsMenuOpen(false)}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          >\n            <path d=\"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"></path>\n            <polyline points=\"9 22 9 12 15 12 15 22\"></polyline>\n          </svg>\n          Home\n        </Link>\n        <Link\n          to=\"/labs\"\n          className={styles.link}\n          activeClassName={styles.linkActive}\n          onClick={() => setIsMenuOpen(false)}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          >\n            <path d=\"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\"></path>\n            <path d=\"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\"></path>\n          </svg>\n          Word Labs\n        </Link>\n        <Link\n          to=\"/dashboard\"\n          className={styles.link}\n          activeClassName={styles.linkActive}\n          onClick={() => setIsMenuOpen(false)}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          >\n            <polyline points=\"23 6 13.5 15.5 8.5 10.5 1 18\"></polyline>\n            <polyline points=\"17 6 23 6 23 12\"></polyline>\n          </svg>\n          Progress\n        </Link>\n        <Link\n          to=\"/settings\"\n          className={styles.link}\n          activeClassName={styles.linkActive}\n          onClick={() => setIsMenuOpen(false)}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n          >\n            <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n            <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path>\n          </svg>\n          Settings\n        </Link>\n      </nav>\n    </header>\n  );\n};\n\nexport default Header;\n","import React from 'react';\nimport Header from './Header';\nimport * as styles from './Layout.module.css';\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\nconst Layout: React.FC<LayoutProps> = ({ children }) => {\n  return (\n    <div className={styles.container}>\n      <Header />\n      <main className={styles.main}>{children}</main>\n      <footer className={styles.footer}>\n         {new Date().getFullYear()} Spelling Bee Site. All rights reserved.\n      </footer>\n    </div>\n  );\n};\n\nexport default Layout;\n","// extracted by mini-css-extract-plugin\nexport var container = \"Layout-module--container--172c3\";\nexport var footer = \"Layout-module--footer--daa62\";\nexport var main = \"Layout-module--main--9156d\";","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(r, e) {\n  return arrayWithHoles(r) || iterableToArrayLimit(r, e) || unsupportedIterableToArray(r, e) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import React, { useState, useEffect, useRef } from 'react';\nimport confetti from 'canvas-confetti';\nimport jsPDF from 'jspdf';\nimport { GameProvider, useGame } from '../../context/GameContext';\nimport { useUser } from '../../context/UserContext';\nimport { useTextToSpeech } from '../../hooks/useTextToSpeech';\nimport GameShell from '../GameUI/GameShell';\nimport Button from '../Button/Button';\n\n// --- Interfaces ---\ninterface AlternatePronunciation {\n  pronunciation: string;\n  note?: string;\n}\n\nexport interface SpellingWord {\n  word: string;\n  pronunciation?: string;\n  definition?: string;\n  sentence?: string;\n  languageOfOrigin?: string;\n  etymologyDetails?: string;\n  partOfSpeech?: string[];\n  alternateDefinitions?: string[];\n  alternatePronunciations?: AlternatePronunciation[];\n  rootWord?: string;\n  rootMeaning?: string;\n  silentLetters?: string[];\n  spellingPattern?: string;\n  difficulty?: string;\n  audioUrl?: string;\n}\n\ninterface TypeTheWordProps {\n  words: SpellingWord[];\n}\n\nconst MAX_QUESTIONS = 3;\n\ninterface QuestionConfig {\n  id: string;\n  label: string;\n  icon: React.ReactNode;\n  getValue: (w: SpellingWord) => string | undefined | null;\n  getAudioValue?: (w: SpellingWord) => string | undefined | null;\n}\n\n// --- Icons ---\nconst SpeakerIcon = ({ className }: { className?: string }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"currentColor\"\n    className={className}\n  >\n    <path d=\"M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318 0-3.052.592C1.032 8.527.18 9.278.077 10.932c-.083 1.343.433 2.502 1.36 3.167.734.526 1.911.526 3.052.526H6.44l4.5 4.5c.944.945 2.56.276 2.56-1.06V4.06zM18.5 12a6.5 6.5 0 00-1.905-4.596l-1.414 1.414a4.5 4.5 0 010 6.364l1.414 1.414A6.5 6.5 0 0018.5 12z\" />\n    <path d=\"M21.905 5.694l-1.414 1.414a8.5 8.5 0 010 9.784l1.414 1.414a10.5 10.5 0 000-12.612z\" />\n  </svg>\n);\n\nconst HeartIcon = ({\n  className,\n  filled,\n}: {\n  className?: string;\n  filled?: boolean;\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill={filled ? `currentColor` : `none`}\n    stroke=\"currentColor\"\n    strokeWidth={2}\n    className={className}\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z\"\n    />\n  </svg>\n);\n\nconst ChevronIcon = ({ className }: { className?: string }) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth={2}\n    className={className}\n  >\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 9l-7 7-7-7\" />\n  </svg>\n);\n\nconst DefinitionIcon = () => <span className=\"text-3xl\"></span>;\nconst OriginIcon = () => <span className=\"text-3xl\"></span>;\nconst SentenceIcon = () => <span className=\"text-3xl\"></span>;\nconst PartOfSpeechIcon = () => <span className=\"text-3xl\"></span>;\nconst AltPronunciationIcon = () => <span className=\"text-3xl\"></span>;\nconst AltDefinitionIcon = () => <span className=\"text-3xl\"></span>;\nconst RootWordIcon = () => <span className=\"text-3xl\"></span>;\n\nconst WordDetailCard: React.FC<{\n  word: SpellingWord;\n  onNext: () => void;\n}> = ({ word, onNext }) => {\n  return (\n    <div className=\"w-full bg-white p-8 md:p-10 text-center animate-in fade-in zoom-in duration-300 rounded-3xl shadow-sm border border-gray-50\">\n      <div className=\"mb-6\">\n        <span className=\"inline-block px-4 py-1 rounded-full bg-red-100 text-red-600 font-bold text-sm tracking-wider mb-4\">\n          INCORRECT\n        </span>\n        <h2 className=\"text-5xl font-black text-gray-900 mb-2 tracking-tight\">\n          {word.word}\n        </h2>\n        <div className=\"font-mono text-xl text-gray-500 bg-gray-100 px-4 py-1 rounded-full inline-block\">\n          {word.pronunciation && `/${word.pronunciation}/`}\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-left mb-8\">\n        {word.definition && (\n          <div className=\"bg-gray-50 p-4 rounded-xl\">\n            <span className=\"block text-xs font-black text-gray-400 uppercase tracking-wider mb-1\">\n              Definition\n            </span>\n            <p className=\"text-gray-800 font-medium leading-snug\">\n              {word.definition}\n            </p>\n          </div>\n        )}\n        {word.sentence && (\n          <div className=\"bg-gray-50 p-4 rounded-xl\">\n            <span className=\"block text-xs font-black text-gray-400 uppercase tracking-wider mb-1\">\n              Example\n            </span>\n            <p className=\"text-gray-800 font-medium leading-snug\">\n              {word.sentence}\n            </p>\n          </div>\n        )}\n        {word.languageOfOrigin && (\n          <div className=\"bg-gray-50 p-4 rounded-xl\">\n            <span className=\"block text-xs font-black text-gray-400 uppercase tracking-wider mb-1\">\n              Origin\n            </span>\n            <p className=\"text-gray-800 font-medium leading-snug\">\n              {word.languageOfOrigin}\n            </p>\n          </div>\n        )}\n        {word.etymologyDetails && (\n          <div className=\"bg-gray-50 p-4 rounded-xl\">\n            <span className=\"block text-xs font-black text-gray-400 uppercase tracking-wider mb-1\">\n              Etymology\n            </span>\n            <p className=\"text-gray-800 font-medium leading-snug\">\n              {word.etymologyDetails}\n            </p>\n          </div>\n        )}\n      </div>\n\n      <div className=\"flex justify-center\">\n        <Button\n          variant=\"primary\"\n          onClick={onNext}\n          className=\"w-full max-w-sm py-4 rounded-xl shadow-lg\"\n        >\n          Next Word \n        </Button>\n      </div>\n    </div>\n  );\n};\n\n// PDF Cheatsheet Generation Function\nconst generatePDFCheatsheet = (\n  words: SpellingWord[],\n  likedWordsList: string[],\n) => {\n  // eslint-disable-next-line new-cap\n  const pdf = new jsPDF();\n  const likedWords = words.filter((w) => likedWordsList.includes(w.word));\n\n  if (likedWords.length === 0) {\n    return;\n  }\n\n  const pageWidth = pdf.internal.pageSize.getWidth();\n  const pageHeight = pdf.internal.pageSize.getHeight();\n  const margin = 20;\n  const maxWidth = pageWidth - 2 * margin;\n  let yPosition = margin;\n\n  // Title\n  pdf.setFontSize(24);\n  pdf.setFont(`helvetica`, `bold`);\n  pdf.text(`Spelling Bee Cheatsheet`, margin, yPosition);\n  yPosition += 10;\n\n  pdf.setFontSize(12);\n  pdf.setFont(`helvetica`, `normal`);\n  pdf.text(\n    `Words to Review - ${new Date().toLocaleDateString()}`,\n    margin,\n    yPosition,\n  );\n  yPosition += 15;\n\n  // Loop through liked words\n  likedWords.forEach((word) => {\n    // Check if we need a new page\n    if (yPosition > pageHeight - 40) {\n      pdf.addPage();\n      yPosition = margin;\n    }\n\n    // Word title with pronunciation\n    pdf.setFontSize(16);\n    pdf.setFont(`helvetica`, `bold`);\n    const wordTitle = word.pronunciation\n      ? `${word.word} /${word.pronunciation}/`\n      : word.word;\n    pdf.text(wordTitle, margin, yPosition);\n    yPosition += 8;\n\n    pdf.setFontSize(10);\n    pdf.setFont(`helvetica`, `normal`);\n\n    // Definition\n    if (word.definition) {\n      pdf.setFont(`helvetica`, `bold`);\n      pdf.text(`Definition:`, margin, yPosition);\n      yPosition += 6;\n      pdf.setFont(`helvetica`, `normal`);\n      const defLines = pdf.splitTextToSize(word.definition, maxWidth);\n      pdf.text(defLines, margin, yPosition);\n      yPosition += defLines.length * 5 + 5;\n    }\n\n    // Example sentence\n    if (word.sentence) {\n      pdf.setFont(`helvetica`, `bold`);\n      pdf.text(`Example:`, margin, yPosition);\n      yPosition += 6;\n      pdf.setFont(`helvetica`, `normal`);\n      const sentLines = pdf.splitTextToSize(word.sentence, maxWidth);\n      pdf.text(sentLines, margin, yPosition);\n      yPosition += sentLines.length * 5 + 5;\n    }\n\n    // Part of Speech\n    if (word.partOfSpeech && word.partOfSpeech.length > 0) {\n      pdf.setFont(`helvetica`, `bold`);\n      pdf.text(`Part of Speech:`, margin, yPosition);\n      yPosition += 6;\n      pdf.setFont(`helvetica`, `normal`);\n      pdf.text(word.partOfSpeech.join(`, `), margin, yPosition);\n      yPosition += 10;\n    }\n\n    // Origin\n    if (word.languageOfOrigin) {\n      pdf.setFont(`helvetica`, `bold`);\n      pdf.text(`Origin:`, margin, yPosition);\n      yPosition += 6;\n      pdf.setFont(`helvetica`, `normal`);\n      pdf.text(word.languageOfOrigin, margin, yPosition);\n      yPosition += 10;\n    }\n\n    // Etymology\n    if (word.etymologyDetails) {\n      pdf.setFont(`helvetica`, `bold`);\n      pdf.text(`Etymology:`, margin, yPosition);\n      yPosition += 6;\n      pdf.setFont(`helvetica`, `normal`);\n      const etymLines = pdf.splitTextToSize(word.etymologyDetails, maxWidth);\n      pdf.text(etymLines, margin, yPosition);\n      yPosition += etymLines.length * 5 + 5;\n    }\n\n    // Separator line\n    yPosition += 5;\n    pdf.setDrawColor(200, 200, 200);\n    pdf.line(margin, yPosition, pageWidth - margin, yPosition);\n    yPosition += 10;\n  });\n\n  // Save the PDF\n  const fileName = `spelling-cheatsheet-${\n    new Date().toISOString().split(`T`)[0]\n  }.pdf`;\n  pdf.save(fileName);\n};\n\nconst TypeTheWordContent: React.FC<TypeTheWordProps> = ({ words }) => {\n  const { state, dispatch } = useGame();\n  const { user, updateProgress, incrementStreak } = useUser();\n  const { speak, isSpeaking } = useTextToSpeech();\n\n  const [userInput, setUserInput] = useState(``);\n  const [isLiked, setIsLiked] = useState(false);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const [revealedQuestions, setRevealedQuestions] = useState<Set<string>>(\n    new Set(),\n  );\n  const [activeQuestionId, setActiveQuestionId] = useState<string | null>(null);\n\n  const currentWord = words[state.currentRound];\n  const questionsCount = revealedQuestions.size;\n\n  useEffect(() => {\n    if (state.status === `playing` && currentWord) {\n      setUserInput(``);\n      setRevealedQuestions(new Set());\n      setActiveQuestionId(null);\n      // Check if current word is in liked list\n      setIsLiked(state.likedWords.has(currentWord.word));\n      inputRef.current?.focus();\n    }\n  }, [state.currentRound, state.status, currentWord, state.likedWords]);\n\n  const handlePlayAudio = () => {\n    if (!currentWord) return;\n    speak(currentWord.word);\n    inputRef.current?.focus();\n  };\n\n  const handleLikeToggle = () => {\n    if (!currentWord) return;\n\n    if (isLiked) {\n      dispatch({ type: `REMOVE_LIKED_WORD`, word: currentWord.word });\n    } else {\n      dispatch({ type: `ADD_LIKED_WORD`, word: currentWord.word });\n    }\n    setIsLiked(!isLiked);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (state.status !== `playing` || !currentWord) return;\n\n    const trimmedInput = userInput.trim();\n    const isCorrect =\n      trimmedInput.toLowerCase() === currentWord.word.toLowerCase();\n\n    if (isCorrect) {\n      confetti({\n        particleCount: 100,\n        spread: 70,\n        origin: { y: 0.6 },\n        colors: [`#4F46E5`, `#10B981`, `#F59E0B`],\n      });\n\n      updateProgress({ wordsMastered: (user?.wordsMastered || 0) + 1 });\n\n      if (state.currentRound === words.length - 1) {\n        updateProgress({ labsCompleted: (user?.labsCompleted || 0) + 1 });\n        incrementStreak();\n      }\n    } else {\n      // If the answer is incorrect, automatically add the word to liked words\n      if (!isLiked) {\n        dispatch({ type: `ADD_LIKED_WORD`, word: currentWord.word });\n        setIsLiked(true); // Update local state to reflect the change\n      }\n    }\n\n    dispatch({\n      type: `SUBMIT_ANSWER`,\n      isCorrect,\n      question: currentWord.word,\n      userAnswer: trimmedInput,\n      correctAnswer: currentWord.word,\n    });\n\n    if (isCorrect) {\n      setTimeout(() => {\n        dispatch({ type: `NEXT_ROUND` });\n      }, 1500);\n    }\n  };\n\n  const availableQuestions: QuestionConfig[] = [\n    {\n      id: `definition`,\n      label: `Definition`,\n      icon: <DefinitionIcon />,\n      getValue: (w: SpellingWord) => w.definition,\n    },\n    {\n      id: `origin`,\n      label: `Origin`,\n      icon: <OriginIcon />,\n      getValue: (w: SpellingWord) => w.languageOfOrigin || w.etymologyDetails,\n    },\n    {\n      id: `sentence`,\n      label: `Sentence`,\n      icon: <SentenceIcon />,\n      getValue: (w: SpellingWord) =>\n        w.sentence?.replace(new RegExp(w.word, `gi`), `____`),\n      getAudioValue: (w: SpellingWord) => w.sentence,\n    },\n    {\n      id: `partOfSpeech`,\n      label: `Part of Speech`,\n      icon: <PartOfSpeechIcon />,\n      getValue: (w: SpellingWord) => w.partOfSpeech?.join(`, `),\n    },\n    {\n      id: `altPronunciation`,\n      label: `Pronunciation`,\n      icon: <AltPronunciationIcon />,\n      getValue: (w: SpellingWord) =>\n        w.alternatePronunciations?.map((p) => p.pronunciation).join(`, `) ||\n        w.pronunciation,\n    },\n    {\n      id: `altDefinition`,\n      label: `Alt Definition`,\n      icon: <AltDefinitionIcon />,\n      getValue: (w: SpellingWord) => w.alternateDefinitions?.join(`; `),\n    },\n    {\n      id: `root`,\n      label: `Root Word`,\n      icon: <RootWordIcon />,\n      getValue: (w: SpellingWord) =>\n        w.rootWord\n          ? `${w.rootWord} ${w.rootMeaning ? `(${w.rootMeaning})` : ``}`\n          : null,\n    },\n    {\n      id: `pattern`,\n      label: `Pattern`,\n      icon: <span className=\"text-3xl\"></span>,\n      getValue: (w: SpellingWord) => w.spellingPattern,\n    },\n  ];\n\n  const handleAskQuestion = (questionId: string) => {\n    const info = availableQuestions.find((q) => q.id === questionId);\n    if (!info) return;\n\n    const displayValue = info.getValue(currentWord!);\n    const audioValue = info.getAudioValue\n      ? info.getAudioValue(currentWord!)\n      : displayValue;\n\n    if (!displayValue) {\n      speak(\n        `This word ${\n          currentWord.word\n        } does not have any ${info.label.toLowerCase()}.`,\n      );\n    } else if (audioValue) {\n      speak(audioValue);\n    }\n\n    if (revealedQuestions.has(questionId)) {\n      setActiveQuestionId(questionId);\n      return;\n    }\n\n    if (questionsCount >= MAX_QUESTIONS) return;\n\n    setRevealedQuestions((prev) => new Set(prev).add(questionId));\n    setActiveQuestionId(questionId);\n  };\n\n  if (!currentWord && state.status === `playing`) {\n    return <div className=\"p-8 text-center text-gray-500\">Loading...</div>;\n  }\n\n  return (\n    <GameShell\n      title=\"Spelling Challenge\"\n      description={\n        <p className=\"text-gray-600\">\n          Listen to the word and type the spelling correctly.\n        </p>\n      }\n      onStart={() =>\n        dispatch({ type: `START_GAME`, totalRounds: words.length })\n      }\n      onDownloadCheatsheet={() =>\n        generatePDFCheatsheet(words, Array.from(state.likedWords))\n      }\n    >\n      <div className=\"w-full flex flex-col gap-6\">\n        {state.status === (`error` as any) ? (\n          <WordDetailCard\n            word={currentWord!}\n            onNext={() => dispatch({ type: `NEXT_ROUND` })}\n          />\n        ) : (\n          <>\n            {/* Main Interaction Card */}\n            <div className=\"relative bg-white rounded-3xl shadow-sm border border-gray-100 p-10\">\n              {/* Like Button - Absolute Top Right */}\n              <button\n                onClick={handleLikeToggle}\n                className={`\n                  absolute top-6 right-6 flex items-center gap-2.5 px-6 py-2.5 rounded-full border font-semibold transition-all\n                  ${\n                    isLiked\n                      ? `border-blue-400/50 bg-blue-50 text-blue-600`\n                      : `border-gray-200 text-gray-500 hover:border-gray-300 hover:bg-gray-50`\n                  }\n                `}\n              >\n                <HeartIcon className=\"w-5 h-5\" filled={isLiked} />\n                <span className=\"text-base\">Like</span>\n              </button>\n\n              {/* Top Row: Play Word Button */}\n              <div className=\"flex items-center gap-4 mb-10\">\n                <button\n                  onClick={handlePlayAudio}\n                  disabled={isSpeaking}\n                  className=\"flex items-center gap-3 px-6 py-3 bg-white border-2 border-gray-200 rounded-xl font-bold text-lg text-gray-700 hover:border-gray-300 hover:bg-gray-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  <SpeakerIcon className=\"w-6 h-6\" />\n                  <span>Play Word</span>\n                </button>\n              </div>\n\n              {/* Bottom Row: Input + Button */}\n              <form\n                onSubmit={handleSubmit}\n                className=\"flex flex-col sm:flex-row gap-4\"\n              >\n                <div className=\"flex-1 relative\">\n                  <input\n                    ref={inputRef}\n                    type=\"text\"\n                    value={userInput}\n                    onChange={(e) => setUserInput(e.target.value)}\n                    disabled={state.status !== `playing`}\n                    className={`\n                      w-full h-16 px-6 text-xl rounded-2xl border outline-none transition-all\n                      ${\n                        state.status === `success`\n                          ? `border-green-400 bg-green-50 text-green-700`\n                          : state.status === (`error` as any)\n                          ? `border-red-400 bg-red-50 text-red-700`\n                          : `border-indigo-100 bg-white focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100`\n                      }\n                    `}\n                    placeholder=\"Type your word here...\"\n                    autoComplete=\"off\"\n                    autoCorrect=\"off\"\n                    autoCapitalize=\"off\"\n                  />\n                  {state.status === `success` && (\n                    <div className=\"absolute right-4 top-1/2 -translate-y-1/2 text-2xl animate-bounce\">\n                      \n                    </div>\n                  )}\n                </div>\n\n                <button\n                  type=\"submit\"\n                  disabled={!userInput || state.status !== `playing`}\n                  className=\"h-16 px-10 bg-[#2563EB] hover:bg-[#1d4ed8] disabled:bg-gray-300 text-white font-bold text-lg rounded-2xl shadow-sm hover:shadow-md transition-all disabled:cursor-not-allowed\"\n                >\n                  {state.status === `success` ? `Correct!` : `Check Answer`}\n                </button>\n              </form>\n            </div>\n\n            {/* Pronouncer Panel */}\n            {state.status === `playing` && (\n              <div className=\"bg-white rounded-3xl shadow-sm border border-gray-100 p-8\">\n                {/* Header */}\n                <div className=\"flex items-start justify-between mb-6\">\n                  <div className=\"flex flex-col\">\n                    <h3 className=\"text-2xl font-black text-gray-900\">\n                      Ask Pronouncer Panel\n                    </h3>\n                    <span className=\"text-sm text-gray-500 font-medium mt-1\">\n                      (Asked: {questionsCount}/{MAX_QUESTIONS})\n                    </span>\n                  </div>\n                  <ChevronIcon className=\"w-6 h-6 text-gray-400 mt-1\" />\n                </div>\n\n                {/* Grid of Buttons - 4 columns, truly square */}\n                <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6\">\n                  {availableQuestions.map((q) => {\n                    const isRevealed = revealedQuestions.has(q.id);\n                    const canAsk = isRevealed || questionsCount < MAX_QUESTIONS;\n                    const isActive = activeQuestionId === q.id;\n\n                    return (\n                      <button\n                        key={q.id}\n                        type=\"button\"\n                        onClick={() => handleAskQuestion(q.id)}\n                        disabled={!canAsk}\n                        className={`\n                          aspect-square flex flex-col items-center justify-center p-4 rounded-2xl border transition-all duration-200 gap-2\n                          ${\n                            isActive\n                              ? `border-indigo-400 bg-indigo-50 shadow-sm ring-1 ring-indigo-200`\n                              : `border-gray-200 bg-white hover:border-gray-300 hover:shadow-sm`\n                          }\n                          ${\n                            !canAsk\n                              ? `opacity-30 cursor-not-allowed bg-gray-50`\n                              : `cursor-pointer`\n                          }\n                        `}\n                      >\n                        <div>{q.icon}</div>\n                        <span className=\"text-sm font-bold text-gray-800 text-center leading-tight\">\n                          {q.label}\n                        </span>\n                      </button>\n                    );\n                  })}\n                </div>\n\n                {/* Answer Display */}\n                {activeQuestionId && (\n                  <div className=\"bg-indigo-50 rounded-2xl p-5 border border-indigo-100 animate-in fade-in slide-in-from-top-2 duration-300\">\n                    <span className=\"block text-xs font-black text-indigo-400 uppercase tracking-widest mb-2\">\n                      {\n                        availableQuestions.find(\n                          (q) => q.id === activeQuestionId,\n                        )?.label\n                      }\n                    </span>\n                    <p className=\"text-lg text-gray-800 font-medium leading-relaxed\">\n                      {availableQuestions\n                        .find((q) => q.id === activeQuestionId)\n                        ?.getValue(currentWord!) || (\n                        <em className=\"text-gray-400\">Not available</em>\n                      )}\n                    </p>\n                  </div>\n                )}\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </GameShell>\n  );\n};\n\nconst TypeTheWord: React.FC<TypeTheWordProps> = (props) => (\n  <GameProvider>\n    <TypeTheWordContent {...props} />\n  </GameProvider>\n);\n\nexport default TypeTheWord;\n","import React from 'react';\nimport { useGame } from '../../context/GameContext';\n\ninterface GameShellProps {\n  title: string;\n  description?: React.ReactNode;\n  onStart: () => void;\n  children: React.ReactNode;\n  onDownloadCheatsheet?: () => void;\n}\n\nconst GameShell: React.FC<GameShellProps> = ({\n  title,\n  description,\n  onStart,\n  children,\n  onDownloadCheatsheet,\n}) => {\n  const { state } = useGame();\n\n  if (state.status === `idle`) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-[60vh] text-center p-6 animate-in fade-in zoom-in duration-500\">\n        <div className=\"bg-white rounded-2xl shadow-xl p-10 max-w-lg w-full border border-gray-100\">\n          <div className=\"text-6xl mb-6\"></div>\n          <h1 className=\"text-4xl font-black text-gray-900 mb-4 tracking-tight\">\n            {title}\n          </h1>\n          {description && (\n            <div className=\"text-gray-600 mb-8 leading-relaxed\">\n              {description}\n            </div>\n          )}\n          <button\n            onClick={onStart}\n            className=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-8 rounded-xl text-lg transition-all transform hover:scale-105 shadow-lg hover:shadow-indigo-200\"\n          >\n            Start Playing\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (state.status === `finished`) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-[60vh] text-center p-6 animate-in fade-in zoom-in duration-500\">\n        <div className=\"bg-white rounded-2xl shadow-xl p-10 max-w-lg w-full border border-gray-100\">\n          <div className=\"text-6xl mb-4\"></div>\n          <h2 className=\"text-3xl font-black text-gray-900 mb-2\">\n            Game Completed!\n          </h2>\n          <p className=\"text-gray-500 mb-8\">\n            Great job practicing your spelling.\n          </p>\n\n          <div className=\"bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-8 mb-8\">\n            <div className=\"text-sm font-bold text-gray-500 uppercase tracking-widest mb-2\">\n              Final Score\n            </div>\n            <div className=\"text-6xl font-black text-indigo-600\">\n              {state.score}\n              <span className=\"text-2xl text-gray-400 font-medium ml-2\">\n                / {state.totalRounds}\n              </span>\n            </div>\n          </div>\n\n          {/* Download Cheatsheet Button */}\n          {onDownloadCheatsheet && state.likedWords.size > 0 && (\n            <button\n              onClick={onDownloadCheatsheet}\n              className=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-8 rounded-xl transition-all shadow-lg mb-4 flex items-center justify-center gap-2\"\n            >\n              <span></span>\n              <span>Download Cheatsheet ({state.likedWords.size} words)</span>\n            </button>\n          )}\n\n          <button\n            onClick={() => window.location.reload()}\n            className=\"w-full bg-gray-900 hover:bg-gray-800 text-white font-bold py-4 px-8 rounded-xl transition-all shadow-lg\"\n          >\n            Play Again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Playing State - matches mockup with top-left HUD\n  return (\n    <div className=\"w-full min-h-screen bg-[#F5F7FA] p-6\">\n      {/* HUD - Top Left Corner */}\n      <div className=\"mb-8\">\n        <div className=\"inline-block\">\n          <div className=\"text-xs font-bold text-gray-400 uppercase tracking-wider mb-1\">\n            ROUND\n          </div>\n          <div className=\"flex items-baseline gap-2\">\n            <span className=\"text-4xl font-black text-gray-800 leading-none\">\n              {state.currentRound + 1}\n            </span>\n            <span className=\"text-2xl font-medium text-gray-400\">\n              / {state.totalRounds}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      {/* Game Content - Centered */}\n      <div className=\"max-w-2xl mx-auto\">{children}</div>\n    </div>\n  );\n};\n\nexport default GameShell;\n","export function decode(bytes, encoding = 'utf8') {\n    const decoder = new TextDecoder(encoding);\n    return decoder.decode(bytes);\n}\nconst encoder = new TextEncoder();\nexport function encode(str) {\n    return encoder.encode(str);\n}\n//# sourceMappingURL=text.js.map","import { decode, encode } from './text';\nconst defaultByteLength = 1024 * 8;\nconst hostBigEndian = (() => {\n    const array = new Uint8Array(4);\n    const view = new Uint32Array(array.buffer);\n    return !((view[0] = 1) & array[0]);\n})();\nconst typedArrays = {\n    int8: globalThis.Int8Array,\n    uint8: globalThis.Uint8Array,\n    int16: globalThis.Int16Array,\n    uint16: globalThis.Uint16Array,\n    int32: globalThis.Int32Array,\n    uint32: globalThis.Uint32Array,\n    uint64: globalThis.BigUint64Array,\n    int64: globalThis.BigInt64Array,\n    float32: globalThis.Float32Array,\n    float64: globalThis.Float64Array,\n};\nexport class IOBuffer {\n    /**\n     * Reference to the internal ArrayBuffer object.\n     */\n    buffer;\n    /**\n     * Byte length of the internal ArrayBuffer.\n     */\n    byteLength;\n    /**\n     * Byte offset of the internal ArrayBuffer.\n     */\n    byteOffset;\n    /**\n     * Byte length of the internal ArrayBuffer.\n     */\n    length;\n    /**\n     * The current offset of the buffer's pointer.\n     */\n    offset;\n    lastWrittenByte;\n    littleEndian;\n    _data;\n    _mark;\n    _marks;\n    /**\n     * Create a new IOBuffer.\n     * @param data - The data to construct the IOBuffer with.\n     * If data is a number, it will be the new buffer's length<br>\n     * If data is `undefined`, the buffer will be initialized with a default length of 8Kb<br>\n     * If data is an ArrayBuffer, SharedArrayBuffer, an ArrayBufferView (Typed Array), an IOBuffer instance,\n     * or a Node.js Buffer, a view will be created over the underlying ArrayBuffer.\n     * @param options - An object for the options.\n     * @returns A new IOBuffer instance.\n     */\n    constructor(data = defaultByteLength, options = {}) {\n        let dataIsGiven = false;\n        if (typeof data === 'number') {\n            data = new ArrayBuffer(data);\n        }\n        else {\n            dataIsGiven = true;\n            this.lastWrittenByte = data.byteLength;\n        }\n        const offset = options.offset ? options.offset >>> 0 : 0;\n        const byteLength = data.byteLength - offset;\n        let dvOffset = offset;\n        if (ArrayBuffer.isView(data) || data instanceof IOBuffer) {\n            if (data.byteLength !== data.buffer.byteLength) {\n                dvOffset = data.byteOffset + offset;\n            }\n            data = data.buffer;\n        }\n        if (dataIsGiven) {\n            this.lastWrittenByte = byteLength;\n        }\n        else {\n            this.lastWrittenByte = 0;\n        }\n        this.buffer = data;\n        this.length = byteLength;\n        this.byteLength = byteLength;\n        this.byteOffset = dvOffset;\n        this.offset = 0;\n        this.littleEndian = true;\n        this._data = new DataView(this.buffer, dvOffset, byteLength);\n        this._mark = 0;\n        this._marks = [];\n    }\n    /**\n     * Checks if the memory allocated to the buffer is sufficient to store more\n     * bytes after the offset.\n     * @param byteLength - The needed memory in bytes.\n     * @returns `true` if there is sufficient space and `false` otherwise.\n     */\n    available(byteLength = 1) {\n        return this.offset + byteLength <= this.length;\n    }\n    /**\n     * Check if little-endian mode is used for reading and writing multi-byte\n     * values.\n     * @returns `true` if little-endian mode is used, `false` otherwise.\n     */\n    isLittleEndian() {\n        return this.littleEndian;\n    }\n    /**\n     * Set little-endian mode for reading and writing multi-byte values.\n     * @returns This.\n     */\n    setLittleEndian() {\n        this.littleEndian = true;\n        return this;\n    }\n    /**\n     * Check if big-endian mode is used for reading and writing multi-byte values.\n     * @returns `true` if big-endian mode is used, `false` otherwise.\n     */\n    isBigEndian() {\n        return !this.littleEndian;\n    }\n    /**\n     * Switches to big-endian mode for reading and writing multi-byte values.\n     * @returns This.\n     */\n    setBigEndian() {\n        this.littleEndian = false;\n        return this;\n    }\n    /**\n     * Move the pointer n bytes forward.\n     * @param n - Number of bytes to skip.\n     * @returns This.\n     */\n    skip(n = 1) {\n        this.offset += n;\n        return this;\n    }\n    /**\n     * Move the pointer n bytes backward.\n     * @param n - Number of bytes to move back.\n     * @returns This.\n     */\n    back(n = 1) {\n        this.offset -= n;\n        return this;\n    }\n    /**\n     * Move the pointer to the given offset.\n     * @param offset - The offset to move to.\n     * @returns This.\n     */\n    seek(offset) {\n        this.offset = offset;\n        return this;\n    }\n    /**\n     * Store the current pointer offset.\n     * @see {@link IOBuffer#reset}\n     * @returns This.\n     */\n    mark() {\n        this._mark = this.offset;\n        return this;\n    }\n    /**\n     * Move the pointer back to the last pointer offset set by mark.\n     * @see {@link IOBuffer#mark}\n     * @returns This.\n     */\n    reset() {\n        this.offset = this._mark;\n        return this;\n    }\n    /**\n     * Push the current pointer offset to the mark stack.\n     * @see {@link IOBuffer#popMark}\n     * @returns This.\n     */\n    pushMark() {\n        this._marks.push(this.offset);\n        return this;\n    }\n    /**\n     * Pop the last pointer offset from the mark stack, and set the current\n     * pointer offset to the popped value.\n     * @see {@link IOBuffer#pushMark}\n     * @returns This.\n     */\n    popMark() {\n        const offset = this._marks.pop();\n        if (offset === undefined) {\n            throw new Error('Mark stack empty');\n        }\n        this.seek(offset);\n        return this;\n    }\n    /**\n     * Move the pointer offset back to 0.\n     * @returns This.\n     */\n    rewind() {\n        this.offset = 0;\n        return this;\n    }\n    /**\n     * Make sure the buffer has sufficient memory to write a given byteLength at\n     * the current pointer offset.\n     * If the buffer's memory is insufficient, this method will create a new\n     * buffer (a copy) with a length that is twice (byteLength + current offset).\n     * @param byteLength - The needed memory in bytes.\n     * @returns This.\n     */\n    ensureAvailable(byteLength = 1) {\n        if (!this.available(byteLength)) {\n            const lengthNeeded = this.offset + byteLength;\n            const newLength = lengthNeeded * 2;\n            const newArray = new Uint8Array(newLength);\n            newArray.set(new Uint8Array(this.buffer));\n            this.buffer = newArray.buffer;\n            this.length = newLength;\n            this.byteLength = newLength;\n            this._data = new DataView(this.buffer);\n        }\n        return this;\n    }\n    /**\n     * Read a byte and return false if the byte's value is 0, or true otherwise.\n     * Moves pointer forward by one byte.\n     * @returns The read boolean.\n     */\n    readBoolean() {\n        return this.readUint8() !== 0;\n    }\n    /**\n     * Read a signed 8-bit integer and move pointer forward by 1 byte.\n     * @returns The read byte.\n     */\n    readInt8() {\n        return this._data.getInt8(this.offset++);\n    }\n    /**\n     * Read an unsigned 8-bit integer and move pointer forward by 1 byte.\n     * @returns The read byte.\n     */\n    readUint8() {\n        return this._data.getUint8(this.offset++);\n    }\n    /**\n     * Alias for {@link IOBuffer#readUint8}.\n     * @returns The read byte.\n     */\n    readByte() {\n        return this.readUint8();\n    }\n    /**\n     * Read `n` bytes and move pointer forward by `n` bytes.\n     * @param n - Number of bytes to read.\n     * @returns The read bytes.\n     */\n    readBytes(n = 1) {\n        return this.readArray(n, 'uint8');\n    }\n    /**\n     * Creates an array of corresponding to the type `type` and size `size`.\n     * For example type `uint8` will create a `Uint8Array`.\n     * @param size - size of the resulting array\n     * @param type - number type of elements to read\n     * @returns The read array.\n     */\n    readArray(size, type) {\n        const bytes = typedArrays[type].BYTES_PER_ELEMENT * size;\n        const offset = this.byteOffset + this.offset;\n        const slice = this.buffer.slice(offset, offset + bytes);\n        if (this.littleEndian === hostBigEndian &&\n            type !== 'uint8' &&\n            type !== 'int8') {\n            const slice = new Uint8Array(this.buffer.slice(offset, offset + bytes));\n            slice.reverse();\n            const returnArray = new typedArrays[type](slice.buffer);\n            this.offset += bytes;\n            returnArray.reverse();\n            return returnArray;\n        }\n        const returnArray = new typedArrays[type](slice);\n        this.offset += bytes;\n        return returnArray;\n    }\n    /**\n     * Read a 16-bit signed integer and move pointer forward by 2 bytes.\n     * @returns The read value.\n     */\n    readInt16() {\n        const value = this._data.getInt16(this.offset, this.littleEndian);\n        this.offset += 2;\n        return value;\n    }\n    /**\n     * Read a 16-bit unsigned integer and move pointer forward by 2 bytes.\n     * @returns The read value.\n     */\n    readUint16() {\n        const value = this._data.getUint16(this.offset, this.littleEndian);\n        this.offset += 2;\n        return value;\n    }\n    /**\n     * Read a 32-bit signed integer and move pointer forward by 4 bytes.\n     * @returns The read value.\n     */\n    readInt32() {\n        const value = this._data.getInt32(this.offset, this.littleEndian);\n        this.offset += 4;\n        return value;\n    }\n    /**\n     * Read a 32-bit unsigned integer and move pointer forward by 4 bytes.\n     * @returns The read value.\n     */\n    readUint32() {\n        const value = this._data.getUint32(this.offset, this.littleEndian);\n        this.offset += 4;\n        return value;\n    }\n    /**\n     * Read a 32-bit floating number and move pointer forward by 4 bytes.\n     * @returns The read value.\n     */\n    readFloat32() {\n        const value = this._data.getFloat32(this.offset, this.littleEndian);\n        this.offset += 4;\n        return value;\n    }\n    /**\n     * Read a 64-bit floating number and move pointer forward by 8 bytes.\n     * @returns The read value.\n     */\n    readFloat64() {\n        const value = this._data.getFloat64(this.offset, this.littleEndian);\n        this.offset += 8;\n        return value;\n    }\n    /**\n     * Read a 64-bit signed integer number and move pointer forward by 8 bytes.\n     * @returns The read value.\n     */\n    readBigInt64() {\n        const value = this._data.getBigInt64(this.offset, this.littleEndian);\n        this.offset += 8;\n        return value;\n    }\n    /**\n     * Read a 64-bit unsigned integer number and move pointer forward by 8 bytes.\n     * @returns The read value.\n     */\n    readBigUint64() {\n        const value = this._data.getBigUint64(this.offset, this.littleEndian);\n        this.offset += 8;\n        return value;\n    }\n    /**\n     * Read a 1-byte ASCII character and move pointer forward by 1 byte.\n     * @returns The read character.\n     */\n    readChar() {\n        // eslint-disable-next-line unicorn/prefer-code-point\n        return String.fromCharCode(this.readInt8());\n    }\n    /**\n     * Read `n` 1-byte ASCII characters and move pointer forward by `n` bytes.\n     * @param n - Number of characters to read.\n     * @returns The read characters.\n     */\n    readChars(n = 1) {\n        let result = '';\n        for (let i = 0; i < n; i++) {\n            result += this.readChar();\n        }\n        return result;\n    }\n    /**\n     * Read the next `n` bytes, return a UTF-8 decoded string and move pointer\n     * forward by `n` bytes.\n     * @param n - Number of bytes to read.\n     * @returns The decoded string.\n     */\n    readUtf8(n = 1) {\n        return decode(this.readBytes(n));\n    }\n    /**\n     * Read the next `n` bytes, return a string decoded with `encoding` and move pointer\n     * forward by `n` bytes.\n     * If no encoding is passed, the function is equivalent to @see {@link IOBuffer#readUtf8}\n     * @param n - Number of bytes to read.\n     * @param encoding - The encoding to use. Default is 'utf8'.\n     * @returns The decoded string.\n     */\n    decodeText(n = 1, encoding = 'utf8') {\n        return decode(this.readBytes(n), encoding);\n    }\n    /**\n     * Write 0xff if the passed value is truthy, 0x00 otherwise and move pointer\n     * forward by 1 byte.\n     * @param value - The value to write.\n     * @returns This.\n     */\n    writeBoolean(value) {\n        this.writeUint8(value ? 0xff : 0x00);\n        return this;\n    }\n    /**\n     * Write `value` as an 8-bit signed integer and move pointer forward by 1 byte.\n     * @param value - The value to write.\n     * @returns This.\n     */\n    writeInt8(value) {\n        this.ensureAvailable(1);\n        this._data.setInt8(this.offset++, value);\n        this._updateLastWrittenByte();\n        return this;\n    }\n    /**\n     * Write `value` as an 8-bit unsigned integer and move pointer forward by 1\n     * byte.\n     * @param value - The value to write.\n     * @returns This.\n     */\n    writeUint8(value) {\n        this.ensureAvailable(1);\n        this._data.setUint8(this.offset++, value);\n        this._updateLastWrittenByte();\n        return this;\n    }\n    /**\n     * An alias for {@link IOBuffer#writeUint8}.\n     * @param value - The value to write.\n     * @returns This.\n     */\n    writeByte(value) {\n        return this.writeUint8(value);\n    }\n    /**\n     * Write all elements of `bytes` as uint8 values and move pointer forward by\n     * `bytes.length` bytes.\n     * @param bytes - The array of bytes to write.\n     * @returns This.\n     */\n    writeBytes(bytes) {\n        this.ensureAvailable(bytes.length);\n        // eslint-disable-next-line @typescript-eslint/prefer-for-of\n        for (let i = 0; i < bytes.length; i++) {\n            this._data.setUint8(this.offset++, bytes[i]);\n        }\n        this._updateLastWrittenByte();\n        return this;\n    }\n    /**\n     * Write `value` as a 16-bit signed integer and move pointer forward by 2\n     * bytes.\n     * @param value - The value to write.\n     * @returns This.\n     */\n    writeInt16(value) {\n        this.ensureAvailable(2);\n        this._data.setInt16(this.offset, value, this.littleEndian);\n        this.offset += 2;\n        this._updateLastWrittenByte();\n        return this;\n    }\n    /**\n     * Write `value` as a 16-bit unsigned integer and move pointer forward by 2\n     * bytes.\n     * @param value - The value to write.\n     * @returns This.\n     */\n    writeUint16(value) {\n        this.ensureAvailable(2);\n        this._data.setUint16(this.offset, value, this.littleEndian);\n        this.offset += 2;\n        this._updateLastWrittenByte();\n        return this;\n    }\n    /**\n     * Write `value` as a 32-bit signed integer and move pointer forward by 4\n     * bytes.\n     * @param value - The value to write.\n     * @returns This.\n     */\n    writeInt32(value) {\n        this.ensureAvailable(4);\n        this._data.setInt32(this.offset, value, this.littleEndian);\n        this.offset += 4;\n        this._updateLastWrittenByte();\n        return this;\n    }\n    /**\n     * Write `value` as a 32-bit unsigned integer and move pointer forward by 4\n     * bytes.\n     * @param value - The value to write.\n     * @returns This.\n     */\n    writeUint32(value) {\n        this.ensureAvailable(4);\n        this._data.setUint32(this.offset, value, this.littleEndian);\n        this.offset += 4;\n        this._updateLastWrittenByte();\n        return this;\n    }\n    /**\n     * Write `value` as a 32-bit floating number and move pointer forward by 4\n     * bytes.\n     * @param value - The value to write.\n     * @returns This.\n     */\n    writeFloat32(value) {\n        this.ensureAvailable(4);\n        this._data.setFloat32(this.offset, value, this.littleEndian);\n        this.offset += 4;\n        this._updateLastWrittenByte();\n        return this;\n    }\n    /**\n     * Write `value` as a 64-bit floating number and move pointer forward by 8\n     * bytes.\n     * @param value - The value to write.\n     * @returns This.\n     */\n    writeFloat64(value) {\n        this.ensureAvailable(8);\n        this._data.setFloat64(this.offset, value, this.littleEndian);\n        this.offset += 8;\n        this._updateLastWrittenByte();\n        return this;\n    }\n    /**\n     * Write `value` as a 64-bit signed bigint and move pointer forward by 8\n     * bytes.\n     * @param value - The value to write.\n     * @returns This.\n     */\n    writeBigInt64(value) {\n        this.ensureAvailable(8);\n        this._data.setBigInt64(this.offset, value, this.littleEndian);\n        this.offset += 8;\n        this._updateLastWrittenByte();\n        return this;\n    }\n    /**\n     * Write `value` as a 64-bit unsigned bigint and move pointer forward by 8\n     * bytes.\n     * @param value - The value to write.\n     * @returns This.\n     */\n    writeBigUint64(value) {\n        this.ensureAvailable(8);\n        this._data.setBigUint64(this.offset, value, this.littleEndian);\n        this.offset += 8;\n        this._updateLastWrittenByte();\n        return this;\n    }\n    /**\n     * Write the charCode of `str`'s first character as an 8-bit unsigned integer\n     * and move pointer forward by 1 byte.\n     * @param str - The character to write.\n     * @returns This.\n     */\n    writeChar(str) {\n        // eslint-disable-next-line unicorn/prefer-code-point\n        return this.writeUint8(str.charCodeAt(0));\n    }\n    /**\n     * Write the charCodes of all `str`'s characters as 8-bit unsigned integers\n     * and move pointer forward by `str.length` bytes.\n     * @param str - The characters to write.\n     * @returns This.\n     */\n    writeChars(str) {\n        for (let i = 0; i < str.length; i++) {\n            // eslint-disable-next-line unicorn/prefer-code-point\n            this.writeUint8(str.charCodeAt(i));\n        }\n        return this;\n    }\n    /**\n     * UTF-8 encode and write `str` to the current pointer offset and move pointer\n     * forward according to the encoded length.\n     * @param str - The string to write.\n     * @returns This.\n     */\n    writeUtf8(str) {\n        return this.writeBytes(encode(str));\n    }\n    /**\n     * Export a Uint8Array view of the internal buffer.\n     * The view starts at the byte offset and its length\n     * is calculated to stop at the last written byte or the original length.\n     * @returns A new Uint8Array view.\n     */\n    toArray() {\n        return new Uint8Array(this.buffer, this.byteOffset, this.lastWrittenByte);\n    }\n    /**\n     *  Get the total number of bytes written so far, regardless of the current offset.\n     * @returns - Total number of bytes.\n     */\n    getWrittenByteLength() {\n        return this.lastWrittenByte - this.byteOffset;\n    }\n    /**\n     * Update the last written byte offset\n     * @private\n     */\n    _updateLastWrittenByte() {\n        if (this.offset > this.lastWrittenByte) {\n            this.lastWrittenByte = this.offset;\n        }\n    }\n}\n//# sourceMappingURL=IOBuffer.js.map","const crcTable = [];\nfor (let n = 0; n < 256; n++) {\n    let c = n;\n    for (let k = 0; k < 8; k++) {\n        if (c & 1) {\n            c = 0xedb88320 ^ (c >>> 1);\n        }\n        else {\n            c = c >>> 1;\n        }\n    }\n    crcTable[n] = c;\n}\nconst initialCrc = 0xffffffff;\nfunction updateCrc(currentCrc, data, length) {\n    let c = currentCrc;\n    for (let n = 0; n < length; n++) {\n        c = crcTable[(c ^ data[n]) & 0xff] ^ (c >>> 8);\n    }\n    return c;\n}\nfunction crc(data, length) {\n    return (updateCrc(initialCrc, data, length) ^ initialCrc) >>> 0;\n}\nexport function checkCrc(buffer, crcLength, chunkName) {\n    const expectedCrc = buffer.readUint32();\n    const actualCrc = crc(new Uint8Array(buffer.buffer, buffer.byteOffset + buffer.offset - crcLength - 4, crcLength), crcLength); // \"- 4\" because we already advanced by reading the CRC\n    if (actualCrc !== expectedCrc) {\n        throw new Error(`CRC mismatch for chunk ${chunkName}. Expected ${expectedCrc}, found ${actualCrc}`);\n    }\n}\nexport function writeCrc(buffer, length) {\n    buffer.writeUint32(crc(new Uint8Array(buffer.buffer, buffer.byteOffset + buffer.offset - length, length), length));\n}\n//# sourceMappingURL=crc.js.map","export function unfilterNone(currentLine, newLine, bytesPerLine) {\n    for (let i = 0; i < bytesPerLine; i++) {\n        newLine[i] = currentLine[i];\n    }\n}\nexport function unfilterSub(currentLine, newLine, bytesPerLine, bytesPerPixel) {\n    let i = 0;\n    for (; i < bytesPerPixel; i++) {\n        // just copy first bytes\n        newLine[i] = currentLine[i];\n    }\n    for (; i < bytesPerLine; i++) {\n        newLine[i] = (currentLine[i] + newLine[i - bytesPerPixel]) & 0xff;\n    }\n}\nexport function unfilterUp(currentLine, newLine, prevLine, bytesPerLine) {\n    let i = 0;\n    if (prevLine.length === 0) {\n        // just copy bytes for first line\n        for (; i < bytesPerLine; i++) {\n            newLine[i] = currentLine[i];\n        }\n    }\n    else {\n        for (; i < bytesPerLine; i++) {\n            newLine[i] = (currentLine[i] + prevLine[i]) & 0xff;\n        }\n    }\n}\nexport function unfilterAverage(currentLine, newLine, prevLine, bytesPerLine, bytesPerPixel) {\n    let i = 0;\n    if (prevLine.length === 0) {\n        for (; i < bytesPerPixel; i++) {\n            newLine[i] = currentLine[i];\n        }\n        for (; i < bytesPerLine; i++) {\n            newLine[i] = (currentLine[i] + (newLine[i - bytesPerPixel] >> 1)) & 0xff;\n        }\n    }\n    else {\n        for (; i < bytesPerPixel; i++) {\n            newLine[i] = (currentLine[i] + (prevLine[i] >> 1)) & 0xff;\n        }\n        for (; i < bytesPerLine; i++) {\n            newLine[i] =\n                (currentLine[i] + ((newLine[i - bytesPerPixel] + prevLine[i]) >> 1)) &\n                    0xff;\n        }\n    }\n}\nexport function unfilterPaeth(currentLine, newLine, prevLine, bytesPerLine, bytesPerPixel) {\n    let i = 0;\n    if (prevLine.length === 0) {\n        for (; i < bytesPerPixel; i++) {\n            newLine[i] = currentLine[i];\n        }\n        for (; i < bytesPerLine; i++) {\n            newLine[i] = (currentLine[i] + newLine[i - bytesPerPixel]) & 0xff;\n        }\n    }\n    else {\n        for (; i < bytesPerPixel; i++) {\n            newLine[i] = (currentLine[i] + prevLine[i]) & 0xff;\n        }\n        for (; i < bytesPerLine; i++) {\n            newLine[i] =\n                (currentLine[i] +\n                    paethPredictor(newLine[i - bytesPerPixel], prevLine[i], prevLine[i - bytesPerPixel])) &\n                    0xff;\n        }\n    }\n}\nfunction paethPredictor(a, b, c) {\n    const p = a + b - c;\n    const pa = Math.abs(p - a);\n    const pb = Math.abs(p - b);\n    const pc = Math.abs(p - c);\n    if (pa <= pb && pa <= pc)\n        return a;\n    else if (pb <= pc)\n        return b;\n    else\n        return c;\n}\n//# sourceMappingURL=unfilter.js.map","import { unfilterAverage, unfilterNone, unfilterPaeth, unfilterSub, unfilterUp, } from './unfilter';\n/**\n * Apllies filter on scanline based on the filter type.\n * @param filterType - The filter type to apply.\n * @param currentLine - The current line of pixel data.\n * @param newLine - The new line of pixel data.\n * @param prevLine - The previous line of pixel data.\n * @param passLineBytes - The number of bytes in the pass line.\n * @param bytesPerPixel - The number of bytes per pixel.\n */\nexport function applyUnfilter(filterType, currentLine, newLine, prevLine, passLineBytes, bytesPerPixel) {\n    switch (filterType) {\n        case 0:\n            unfilterNone(currentLine, newLine, passLineBytes);\n            break;\n        case 1:\n            unfilterSub(currentLine, newLine, passLineBytes, bytesPerPixel);\n            break;\n        case 2:\n            unfilterUp(currentLine, newLine, prevLine, passLineBytes);\n            break;\n        case 3:\n            unfilterAverage(currentLine, newLine, prevLine, passLineBytes, bytesPerPixel);\n            break;\n        case 4:\n            unfilterPaeth(currentLine, newLine, prevLine, passLineBytes, bytesPerPixel);\n            break;\n        default:\n            throw new Error(`Unsupported filter: ${filterType}`);\n    }\n}\n//# sourceMappingURL=applyUnfilter.js.map","import { applyUnfilter } from './applyUnfilter';\nconst uint16 = new Uint16Array([0x00ff]);\nconst uint8 = new Uint8Array(uint16.buffer);\nconst osIsLittleEndian = uint8[0] === 0xff;\n/**\n * Decodes the Adam7 interlaced PNG data.\n *\n * @param params - DecodeInterlaceNullParams\n * @returns - array of pixel data.\n */\nexport function decodeInterlaceAdam7(params) {\n    const { data, width, height, channels, depth } = params;\n    // Adam7 interlacing pattern\n    const passes = [\n        { x: 0, y: 0, xStep: 8, yStep: 8 }, // Pass 1\n        { x: 4, y: 0, xStep: 8, yStep: 8 }, // Pass 2\n        { x: 0, y: 4, xStep: 4, yStep: 8 }, // Pass 3\n        { x: 2, y: 0, xStep: 4, yStep: 4 }, // Pass 4\n        { x: 0, y: 2, xStep: 2, yStep: 4 }, // Pass 5\n        { x: 1, y: 0, xStep: 2, yStep: 2 }, // Pass 6\n        { x: 0, y: 1, xStep: 1, yStep: 2 }, // Pass 7\n    ];\n    const bytesPerPixel = Math.ceil(depth / 8) * channels;\n    const resultData = new Uint8Array(height * width * bytesPerPixel);\n    let offset = 0;\n    // Process each pass\n    for (let passIndex = 0; passIndex < 7; passIndex++) {\n        const pass = passes[passIndex];\n        // Calculate pass dimensions\n        const passWidth = Math.ceil((width - pass.x) / pass.xStep);\n        const passHeight = Math.ceil((height - pass.y) / pass.yStep);\n        if (passWidth <= 0 || passHeight <= 0)\n            continue;\n        const passLineBytes = passWidth * bytesPerPixel;\n        const prevLine = new Uint8Array(passLineBytes);\n        // Process each scanline in this pass\n        for (let y = 0; y < passHeight; y++) {\n            // First byte is the filter type\n            const filterType = data[offset++];\n            const currentLine = data.subarray(offset, offset + passLineBytes);\n            offset += passLineBytes;\n            // Create a new line for the unfiltered data\n            const newLine = new Uint8Array(passLineBytes);\n            // Apply the appropriate unfilter\n            applyUnfilter(filterType, currentLine, newLine, prevLine, passLineBytes, bytesPerPixel);\n            prevLine.set(newLine);\n            for (let x = 0; x < passWidth; x++) {\n                const outputX = pass.x + x * pass.xStep;\n                const outputY = pass.y + y * pass.yStep;\n                if (outputX >= width || outputY >= height)\n                    continue;\n                for (let i = 0; i < bytesPerPixel; i++) {\n                    resultData[(outputY * width + outputX) * bytesPerPixel + i] =\n                        newLine[x * bytesPerPixel + i];\n                }\n            }\n        }\n    }\n    if (depth === 16) {\n        const uint16Data = new Uint16Array(resultData.buffer);\n        if (osIsLittleEndian) {\n            for (let k = 0; k < uint16Data.length; k++) {\n                // PNG is always big endian. Swap the bytes.\n                uint16Data[k] = swap16(uint16Data[k]);\n            }\n        }\n        return uint16Data;\n    }\n    else {\n        return resultData;\n    }\n}\nfunction swap16(val) {\n    return ((val & 0xff) << 8) | ((val >> 8) & 0xff);\n}\n//# sourceMappingURL=decodeInterlaceAdam7.js.map","import { unfilterAverage, unfilterNone, unfilterPaeth, unfilterSub, unfilterUp, } from './unfilter';\nconst uint16 = new Uint16Array([0x00ff]);\nconst uint8 = new Uint8Array(uint16.buffer);\nconst osIsLittleEndian = uint8[0] === 0xff;\nconst empty = new Uint8Array(0);\nexport function decodeInterlaceNull(params) {\n    const { data, width, height, channels, depth } = params;\n    const bytesPerPixel = Math.ceil(depth / 8) * channels;\n    const bytesPerLine = Math.ceil((depth / 8) * channels * width);\n    const newData = new Uint8Array(height * bytesPerLine);\n    let prevLine = empty;\n    let offset = 0;\n    let currentLine;\n    let newLine;\n    for (let i = 0; i < height; i++) {\n        currentLine = data.subarray(offset + 1, offset + 1 + bytesPerLine);\n        newLine = newData.subarray(i * bytesPerLine, (i + 1) * bytesPerLine);\n        switch (data[offset]) {\n            case 0:\n                unfilterNone(currentLine, newLine, bytesPerLine);\n                break;\n            case 1:\n                unfilterSub(currentLine, newLine, bytesPerLine, bytesPerPixel);\n                break;\n            case 2:\n                unfilterUp(currentLine, newLine, prevLine, bytesPerLine);\n                break;\n            case 3:\n                unfilterAverage(currentLine, newLine, prevLine, bytesPerLine, bytesPerPixel);\n                break;\n            case 4:\n                unfilterPaeth(currentLine, newLine, prevLine, bytesPerLine, bytesPerPixel);\n                break;\n            default:\n                throw new Error(`Unsupported filter: ${data[offset]}`);\n        }\n        prevLine = newLine;\n        offset += bytesPerLine + 1;\n    }\n    if (depth === 16) {\n        const uint16Data = new Uint16Array(newData.buffer);\n        if (osIsLittleEndian) {\n            for (let k = 0; k < uint16Data.length; k++) {\n                // PNG is always big endian. Swap the bytes.\n                uint16Data[k] = swap16(uint16Data[k]);\n            }\n        }\n        return uint16Data;\n    }\n    else {\n        return newData;\n    }\n}\nfunction swap16(val) {\n    return ((val & 0xff) << 8) | ((val >> 8) & 0xff);\n}\n//# sourceMappingURL=decodeInterlaceNull.js.map","// https://www.w3.org/TR/PNG/#5PNG-file-signature\nconst pngSignature = Uint8Array.of(137, 80, 78, 71, 13, 10, 26, 10);\nexport function writeSignature(buffer) {\n    buffer.writeBytes(pngSignature);\n}\nexport function checkSignature(buffer) {\n    if (!hasPngSignature(buffer.readBytes(pngSignature.length))) {\n        throw new Error('wrong PNG signature');\n    }\n}\nexport function hasPngSignature(array) {\n    if (array.length < pngSignature.length) {\n        return false;\n    }\n    for (let i = 0; i < pngSignature.length; i++) {\n        if (array[i] !== pngSignature[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=signature.js.map","import { writeCrc } from './crc';\n// https://www.w3.org/TR/png/#11tEXt\nexport const textChunkName = 'tEXt';\nconst NULL = 0;\nconst latin1Decoder = new TextDecoder('latin1');\nfunction validateKeyword(keyword) {\n    validateLatin1(keyword);\n    if (keyword.length === 0 || keyword.length > 79) {\n        throw new Error('keyword length must be between 1 and 79');\n    }\n}\n// eslint-disable-next-line no-control-regex\nconst latin1Regex = /^[\\u0000-\\u00FF]*$/;\nfunction validateLatin1(text) {\n    if (!latin1Regex.test(text)) {\n        throw new Error('invalid latin1 text');\n    }\n}\nexport function decodetEXt(text, buffer, length) {\n    const keyword = readKeyword(buffer);\n    text[keyword] = readLatin1(buffer, length - keyword.length - 1);\n}\nexport function encodetEXt(buffer, keyword, text) {\n    validateKeyword(keyword);\n    validateLatin1(text);\n    const length = keyword.length + 1 /* NULL */ + text.length;\n    buffer.writeUint32(length);\n    buffer.writeChars(textChunkName);\n    buffer.writeChars(keyword);\n    buffer.writeByte(NULL);\n    buffer.writeChars(text);\n    writeCrc(buffer, length + 4);\n}\n// https://www.w3.org/TR/png/#11keywords\nexport function readKeyword(buffer) {\n    buffer.mark();\n    while (buffer.readByte() !== NULL) {\n        /* advance */\n    }\n    const end = buffer.offset;\n    buffer.reset();\n    const keyword = latin1Decoder.decode(buffer.readBytes(end - buffer.offset - 1));\n    // NULL\n    buffer.skip(1);\n    validateKeyword(keyword);\n    return keyword;\n}\nexport function readLatin1(buffer, length) {\n    return latin1Decoder.decode(buffer.readBytes(length));\n}\n//# sourceMappingURL=text.js.map","export const ColorType = {\n    UNKNOWN: -1,\n    GREYSCALE: 0,\n    TRUECOLOUR: 2,\n    INDEXED_COLOUR: 3,\n    GREYSCALE_ALPHA: 4,\n    TRUECOLOUR_ALPHA: 6,\n};\nexport const CompressionMethod = {\n    UNKNOWN: -1,\n    DEFLATE: 0,\n};\nexport const FilterMethod = {\n    UNKNOWN: -1,\n    ADAPTIVE: 0,\n};\nexport const InterlaceMethod = {\n    UNKNOWN: -1,\n    NO_INTERLACE: 0,\n    ADAM7: 1,\n};\nexport const DisposeOpType = {\n    NONE: 0,\n    BACKGROUND: 1,\n    PREVIOUS: 2,\n};\nexport const BlendOpType = {\n    SOURCE: 0,\n    OVER: 1,\n};\n//# sourceMappingURL=internalTypes.js.map","import { IOBuffer } from 'iobuffer';\nimport { inflate, Inflate as Inflator } from 'pako';\nimport { checkCrc } from './helpers/crc';\nimport { decodeInterlaceAdam7 } from './helpers/decodeInterlaceAdam7';\nimport { decodeInterlaceNull } from './helpers/decodeInterlaceNull';\nimport { checkSignature } from './helpers/signature';\nimport { decodetEXt, readKeyword, textChunkName } from './helpers/text';\nimport { ColorType, CompressionMethod, DisposeOpType, FilterMethod, InterlaceMethod, BlendOpType, } from './internalTypes';\nexport default class PngDecoder extends IOBuffer {\n    _checkCrc;\n    _inflator;\n    _png;\n    _apng;\n    _end;\n    _hasPalette;\n    _palette;\n    _hasTransparency;\n    _transparency;\n    _compressionMethod;\n    _filterMethod;\n    _interlaceMethod;\n    _colorType;\n    _isAnimated;\n    _numberOfFrames;\n    _numberOfPlays;\n    _frames;\n    _writingDataChunks;\n    constructor(data, options = {}) {\n        super(data);\n        const { checkCrc = false } = options;\n        this._checkCrc = checkCrc;\n        this._inflator = new Inflator();\n        this._png = {\n            width: -1,\n            height: -1,\n            channels: -1,\n            data: new Uint8Array(0),\n            depth: 1,\n            text: {},\n        };\n        this._apng = {\n            width: -1,\n            height: -1,\n            channels: -1,\n            depth: 1,\n            numberOfFrames: 1,\n            numberOfPlays: 0,\n            text: {},\n            frames: [],\n        };\n        this._end = false;\n        this._hasPalette = false;\n        this._palette = [];\n        this._hasTransparency = false;\n        this._transparency = new Uint16Array(0);\n        this._compressionMethod = CompressionMethod.UNKNOWN;\n        this._filterMethod = FilterMethod.UNKNOWN;\n        this._interlaceMethod = InterlaceMethod.UNKNOWN;\n        this._colorType = ColorType.UNKNOWN;\n        this._isAnimated = false;\n        this._numberOfFrames = 1;\n        this._numberOfPlays = 0;\n        this._frames = [];\n        this._writingDataChunks = false;\n        // PNG is always big endian\n        // https://www.w3.org/TR/PNG/#7Integers-and-byte-order\n        this.setBigEndian();\n    }\n    decode() {\n        checkSignature(this);\n        while (!this._end) {\n            const length = this.readUint32();\n            const type = this.readChars(4);\n            this.decodeChunk(length, type);\n        }\n        this.decodeImage();\n        return this._png;\n    }\n    decodeApng() {\n        checkSignature(this);\n        while (!this._end) {\n            const length = this.readUint32();\n            const type = this.readChars(4);\n            this.decodeApngChunk(length, type);\n        }\n        this.decodeApngImage();\n        return this._apng;\n    }\n    // https://www.w3.org/TR/PNG/#5Chunk-layout\n    decodeChunk(length, type) {\n        const offset = this.offset;\n        switch (type) {\n            // 11.2 Critical chunks\n            case 'IHDR': // 11.2.2 IHDR Image header\n                this.decodeIHDR();\n                break;\n            case 'PLTE': // 11.2.3 PLTE Palette\n                this.decodePLTE(length);\n                break;\n            case 'IDAT': // 11.2.4 IDAT Image data\n                this.decodeIDAT(length);\n                break;\n            case 'IEND': // 11.2.5 IEND Image trailer\n                this._end = true;\n                break;\n            // 11.3 Ancillary chunks\n            case 'tRNS': // 11.3.2.1 tRNS Transparency\n                this.decodetRNS(length);\n                break;\n            case 'iCCP': // 11.3.3.3 iCCP Embedded ICC profile\n                this.decodeiCCP(length);\n                break;\n            case textChunkName: // 11.3.4.3 tEXt Textual data\n                decodetEXt(this._png.text, this, length);\n                break;\n            case 'pHYs': // 11.3.5.3 pHYs Physical pixel dimensions\n                this.decodepHYs();\n                break;\n            default:\n                this.skip(length);\n                break;\n        }\n        if (this.offset - offset !== length) {\n            throw new Error(`Length mismatch while decoding chunk ${type}`);\n        }\n        if (this._checkCrc) {\n            checkCrc(this, length + 4, type);\n        }\n        else {\n            this.skip(4);\n        }\n    }\n    decodeApngChunk(length, type) {\n        const offset = this.offset;\n        if (type !== 'fdAT' && type !== 'IDAT' && this._writingDataChunks) {\n            this.pushDataToFrame();\n        }\n        switch (type) {\n            case 'acTL':\n                this.decodeACTL();\n                break;\n            case 'fcTL':\n                this.decodeFCTL();\n                break;\n            case 'fdAT':\n                this.decodeFDAT(length);\n                break;\n            default:\n                this.decodeChunk(length, type);\n                this.offset = offset + length;\n                break;\n        }\n        if (this.offset - offset !== length) {\n            throw new Error(`Length mismatch while decoding chunk ${type}`);\n        }\n        if (this._checkCrc) {\n            checkCrc(this, length + 4, type);\n        }\n        else {\n            this.skip(4);\n        }\n    }\n    // https://www.w3.org/TR/PNG/#11IHDR\n    decodeIHDR() {\n        const image = this._png;\n        image.width = this.readUint32();\n        image.height = this.readUint32();\n        image.depth = checkBitDepth(this.readUint8());\n        const colorType = this.readUint8();\n        this._colorType = colorType;\n        let channels;\n        switch (colorType) {\n            case ColorType.GREYSCALE:\n                channels = 1;\n                break;\n            case ColorType.TRUECOLOUR:\n                channels = 3;\n                break;\n            case ColorType.INDEXED_COLOUR:\n                channels = 1;\n                break;\n            case ColorType.GREYSCALE_ALPHA:\n                channels = 2;\n                break;\n            case ColorType.TRUECOLOUR_ALPHA:\n                channels = 4;\n                break;\n            // Kept for exhaustiveness.\n            // eslint-disable-next-line unicorn/no-useless-switch-case\n            case ColorType.UNKNOWN:\n            default:\n                throw new Error(`Unknown color type: ${colorType}`);\n        }\n        this._png.channels = channels;\n        this._compressionMethod = this.readUint8();\n        if (this._compressionMethod !== CompressionMethod.DEFLATE) {\n            throw new Error(`Unsupported compression method: ${this._compressionMethod}`);\n        }\n        this._filterMethod = this.readUint8();\n        this._interlaceMethod = this.readUint8();\n    }\n    decodeACTL() {\n        this._numberOfFrames = this.readUint32();\n        this._numberOfPlays = this.readUint32();\n        this._isAnimated = true;\n    }\n    decodeFCTL() {\n        const image = {\n            sequenceNumber: this.readUint32(),\n            width: this.readUint32(),\n            height: this.readUint32(),\n            xOffset: this.readUint32(),\n            yOffset: this.readUint32(),\n            delayNumber: this.readUint16(),\n            delayDenominator: this.readUint16(),\n            disposeOp: this.readUint8(),\n            blendOp: this.readUint8(),\n            data: new Uint8Array(0),\n        };\n        this._frames.push(image);\n    }\n    // https://www.w3.org/TR/PNG/#11PLTE\n    decodePLTE(length) {\n        if (length % 3 !== 0) {\n            throw new RangeError(`PLTE field length must be a multiple of 3. Got ${length}`);\n        }\n        const l = length / 3;\n        this._hasPalette = true;\n        const palette = [];\n        this._palette = palette;\n        for (let i = 0; i < l; i++) {\n            palette.push([this.readUint8(), this.readUint8(), this.readUint8()]);\n        }\n    }\n    // https://www.w3.org/TR/PNG/#11IDAT\n    decodeIDAT(length) {\n        this._writingDataChunks = true;\n        const dataLength = length;\n        const dataOffset = this.offset + this.byteOffset;\n        this._inflator.push(new Uint8Array(this.buffer, dataOffset, dataLength));\n        if (this._inflator.err) {\n            throw new Error(`Error while decompressing the data: ${this._inflator.err}`);\n        }\n        this.skip(length);\n    }\n    decodeFDAT(length) {\n        this._writingDataChunks = true;\n        let dataLength = length;\n        let dataOffset = this.offset + this.byteOffset;\n        dataOffset += 4;\n        dataLength -= 4;\n        this._inflator.push(new Uint8Array(this.buffer, dataOffset, dataLength));\n        if (this._inflator.err) {\n            throw new Error(`Error while decompressing the data: ${this._inflator.err}`);\n        }\n        this.skip(length);\n    }\n    // https://www.w3.org/TR/PNG/#11tRNS\n    decodetRNS(length) {\n        switch (this._colorType) {\n            case ColorType.GREYSCALE:\n            case ColorType.TRUECOLOUR: {\n                if (length % 2 !== 0) {\n                    throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${length}`);\n                }\n                if (length / 2 > this._png.width * this._png.height) {\n                    throw new Error(`tRNS chunk contains more alpha values than there are pixels (${length / 2} vs ${this._png.width * this._png.height})`);\n                }\n                this._hasTransparency = true;\n                this._transparency = new Uint16Array(length / 2);\n                for (let i = 0; i < length / 2; i++) {\n                    this._transparency[i] = this.readUint16();\n                }\n                break;\n            }\n            case ColorType.INDEXED_COLOUR: {\n                if (length > this._palette.length) {\n                    throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${length} vs ${this._palette.length})`);\n                }\n                let i = 0;\n                for (; i < length; i++) {\n                    const alpha = this.readByte();\n                    this._palette[i].push(alpha);\n                }\n                for (; i < this._palette.length; i++) {\n                    this._palette[i].push(255);\n                }\n                break;\n            }\n            // Kept for exhaustiveness.\n            /* eslint-disable unicorn/no-useless-switch-case */\n            case ColorType.UNKNOWN:\n            case ColorType.GREYSCALE_ALPHA:\n            case ColorType.TRUECOLOUR_ALPHA:\n            default: {\n                throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`);\n            }\n            /* eslint-enable unicorn/no-useless-switch-case */\n        }\n    }\n    // https://www.w3.org/TR/PNG/#11iCCP\n    decodeiCCP(length) {\n        const name = readKeyword(this);\n        const compressionMethod = this.readUint8();\n        if (compressionMethod !== CompressionMethod.DEFLATE) {\n            throw new Error(`Unsupported iCCP compression method: ${compressionMethod}`);\n        }\n        const compressedProfile = this.readBytes(length - name.length - 2);\n        this._png.iccEmbeddedProfile = {\n            name,\n            profile: inflate(compressedProfile),\n        };\n    }\n    // https://www.w3.org/TR/PNG/#11pHYs\n    decodepHYs() {\n        const ppuX = this.readUint32();\n        const ppuY = this.readUint32();\n        const unitSpecifier = this.readByte();\n        this._png.resolution = { x: ppuX, y: ppuY, unit: unitSpecifier };\n    }\n    decodeApngImage() {\n        this._apng.width = this._png.width;\n        this._apng.height = this._png.height;\n        this._apng.channels = this._png.channels;\n        this._apng.depth = this._png.depth;\n        this._apng.numberOfFrames = this._numberOfFrames;\n        this._apng.numberOfPlays = this._numberOfPlays;\n        this._apng.text = this._png.text;\n        this._apng.resolution = this._png.resolution;\n        for (let i = 0; i < this._numberOfFrames; i++) {\n            const newFrame = {\n                sequenceNumber: this._frames[i].sequenceNumber,\n                delayNumber: this._frames[i].delayNumber,\n                delayDenominator: this._frames[i].delayDenominator,\n                data: this._apng.depth === 8\n                    ? new Uint8Array(this._apng.width * this._apng.height * this._apng.channels)\n                    : new Uint16Array(this._apng.width * this._apng.height * this._apng.channels),\n            };\n            const frame = this._frames.at(i);\n            if (frame) {\n                frame.data = decodeInterlaceNull({\n                    data: frame.data,\n                    width: frame.width,\n                    height: frame.height,\n                    channels: this._apng.channels,\n                    depth: this._apng.depth,\n                });\n                if (this._hasPalette) {\n                    this._apng.palette = this._palette;\n                }\n                if (this._hasTransparency) {\n                    this._apng.transparency = this._transparency;\n                }\n                if (i === 0 ||\n                    (frame.xOffset === 0 &&\n                        frame.yOffset === 0 &&\n                        frame.width === this._png.width &&\n                        frame.height === this._png.height)) {\n                    newFrame.data = frame.data;\n                }\n                else {\n                    const prevFrame = this._apng.frames.at(i - 1);\n                    this.disposeFrame(frame, prevFrame, newFrame);\n                    this.addFrameDataToCanvas(newFrame, frame);\n                }\n                this._apng.frames.push(newFrame);\n            }\n        }\n        return this._apng;\n    }\n    disposeFrame(frame, prevFrame, imageFrame) {\n        switch (frame.disposeOp) {\n            case DisposeOpType.NONE:\n                break;\n            case DisposeOpType.BACKGROUND:\n                for (let row = 0; row < this._png.height; row++) {\n                    for (let col = 0; col < this._png.width; col++) {\n                        const index = (row * frame.width + col) * this._png.channels;\n                        for (let channel = 0; channel < this._png.channels; channel++) {\n                            imageFrame.data[index + channel] = 0;\n                        }\n                    }\n                }\n                break;\n            case DisposeOpType.PREVIOUS:\n                imageFrame.data.set(prevFrame.data);\n                break;\n            default:\n                throw new Error('Unknown disposeOp');\n        }\n    }\n    addFrameDataToCanvas(imageFrame, frame) {\n        const maxValue = 1 << this._png.depth;\n        const calculatePixelIndices = (row, col) => {\n            const index = ((row + frame.yOffset) * this._png.width + frame.xOffset + col) *\n                this._png.channels;\n            const frameIndex = (row * frame.width + col) * this._png.channels;\n            return { index, frameIndex };\n        };\n        switch (frame.blendOp) {\n            case BlendOpType.SOURCE:\n                for (let row = 0; row < frame.height; row++) {\n                    for (let col = 0; col < frame.width; col++) {\n                        const { index, frameIndex } = calculatePixelIndices(row, col);\n                        for (let channel = 0; channel < this._png.channels; channel++) {\n                            imageFrame.data[index + channel] =\n                                frame.data[frameIndex + channel];\n                        }\n                    }\n                }\n                break;\n            // https://www.w3.org/TR/png-3/#13Alpha-channel-processing\n            case BlendOpType.OVER:\n                for (let row = 0; row < frame.height; row++) {\n                    for (let col = 0; col < frame.width; col++) {\n                        const { index, frameIndex } = calculatePixelIndices(row, col);\n                        for (let channel = 0; channel < this._png.channels; channel++) {\n                            const sourceAlpha = frame.data[frameIndex + this._png.channels - 1] / maxValue;\n                            const foregroundValue = channel % (this._png.channels - 1) === 0\n                                ? 1\n                                : frame.data[frameIndex + channel];\n                            const value = Math.floor(sourceAlpha * foregroundValue +\n                                (1 - sourceAlpha) * imageFrame.data[index + channel]);\n                            imageFrame.data[index + channel] += value;\n                        }\n                    }\n                }\n                break;\n            default:\n                throw new Error('Unknown blendOp');\n        }\n    }\n    decodeImage() {\n        if (this._inflator.err) {\n            throw new Error(`Error while decompressing the data: ${this._inflator.err}`);\n        }\n        const data = this._isAnimated\n            ? (this._frames?.at(0)).data\n            : this._inflator.result;\n        if (this._filterMethod !== FilterMethod.ADAPTIVE) {\n            throw new Error(`Filter method ${this._filterMethod} not supported`);\n        }\n        if (this._interlaceMethod === InterlaceMethod.NO_INTERLACE) {\n            this._png.data = decodeInterlaceNull({\n                data: data,\n                width: this._png.width,\n                height: this._png.height,\n                channels: this._png.channels,\n                depth: this._png.depth,\n            });\n        }\n        else if (this._interlaceMethod === InterlaceMethod.ADAM7) {\n            this._png.data = decodeInterlaceAdam7({\n                data: data,\n                width: this._png.width,\n                height: this._png.height,\n                channels: this._png.channels,\n                depth: this._png.depth,\n            });\n        }\n        else {\n            throw new Error(`Interlace method ${this._interlaceMethod} not supported`);\n        }\n        if (this._hasPalette) {\n            this._png.palette = this._palette;\n        }\n        if (this._hasTransparency) {\n            this._png.transparency = this._transparency;\n        }\n    }\n    pushDataToFrame() {\n        const result = this._inflator.result;\n        const lastFrame = this._frames.at(-1);\n        if (lastFrame) {\n            lastFrame.data = result;\n        }\n        else {\n            this._frames.push({\n                sequenceNumber: 0,\n                width: this._png.width,\n                height: this._png.height,\n                xOffset: 0,\n                yOffset: 0,\n                delayNumber: 0,\n                delayDenominator: 0,\n                disposeOp: DisposeOpType.NONE,\n                blendOp: BlendOpType.SOURCE,\n                data: result,\n            });\n        }\n        this._inflator = new Inflator();\n        this._writingDataChunks = false;\n    }\n}\nfunction checkBitDepth(value) {\n    if (value !== 1 &&\n        value !== 2 &&\n        value !== 4 &&\n        value !== 8 &&\n        value !== 16) {\n        throw new Error(`invalid bit depth: ${value}`);\n    }\n    return value;\n}\n//# sourceMappingURL=PngDecoder.js.map","export var ResolutionUnitSpecifier;\n(function (ResolutionUnitSpecifier) {\n    /**\n     * Unit is unknown\n     */\n    ResolutionUnitSpecifier[ResolutionUnitSpecifier[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    /**\n     * Unit is the metre\n     */\n    ResolutionUnitSpecifier[ResolutionUnitSpecifier[\"METRE\"] = 1] = \"METRE\";\n})(ResolutionUnitSpecifier || (ResolutionUnitSpecifier = {}));\n//# sourceMappingURL=types.js.map","import PngDecoder from './PngDecoder';\nimport PngEncoder from './PngEncoder';\nexport { hasPngSignature } from './helpers/signature';\nexport * from './types';\nfunction decodePng(data, options) {\n    const decoder = new PngDecoder(data, options);\n    return decoder.decode();\n}\nfunction encodePng(png, options) {\n    const encoder = new PngEncoder(png, options);\n    return encoder.encode();\n}\nfunction decodeApng(data, options) {\n    const decoder = new PngDecoder(data, options);\n    return decoder.decodeApng();\n}\nexport { decodePng as decode, encodePng as encode, decodeApng };\nexport { convertIndexedToRgb } from './convertIndexedToRgb';\n//# sourceMappingURL=index.js.map","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","/**\n * @import {MDXComponents} from 'mdx/types.js'\n * @import {Component, ReactElement, ReactNode} from 'react'\n */\n\n/**\n * @callback MergeComponents\n *   Custom merge function.\n * @param {Readonly<MDXComponents>} currentComponents\n *   Current components from the context.\n * @returns {MDXComponents}\n *   Additional components.\n *\n * @typedef Props\n *   Configuration for `MDXProvider`.\n * @property {ReactNode | null | undefined} [children]\n *   Children (optional).\n * @property {Readonly<MDXComponents> | MergeComponents | null | undefined} [components]\n *   Additional components to use or a function that creates them (optional).\n * @property {boolean | null | undefined} [disableParentContext=false]\n *   Turn off outer component context (default: `false`).\n */\n\nimport React from 'react'\n\n/** @type {Readonly<MDXComponents>} */\nconst emptyComponents = {}\n\nconst MDXContext = React.createContext(emptyComponents)\n\n/**\n * Get current components from the MDX Context.\n *\n * @param {Readonly<MDXComponents> | MergeComponents | null | undefined} [components]\n *   Additional components to use or a function that creates them (optional).\n * @returns {MDXComponents}\n *   Current components.\n */\nexport function useMDXComponents(components) {\n  const contextComponents = React.useContext(MDXContext)\n\n  // Memoize to avoid unnecessary top-level context changes\n  return React.useMemo(\n    function () {\n      // Custom merge via a function prop\n      if (typeof components === 'function') {\n        return components(contextComponents)\n      }\n\n      return {...contextComponents, ...components}\n    },\n    [contextComponents, components]\n  )\n}\n\n/**\n * Provider for MDX context.\n *\n * @param {Readonly<Props>} properties\n *   Properties.\n * @returns {ReactElement}\n *   Element.\n * @satisfies {Component}\n */\nexport function MDXProvider(properties) {\n  /** @type {Readonly<MDXComponents>} */\n  let allComponents\n\n  if (properties.disableParentContext) {\n    allComponents =\n      typeof properties.components === 'function'\n        ? properties.components(emptyComponents)\n        : properties.components || emptyComponents\n  } else {\n    allComponents = useMDXComponents(properties.components)\n  }\n\n  return React.createElement(\n    MDXContext.Provider,\n    {value: allComponents},\n    properties.children\n  )\n}\n","import { useUser } from '../../context/UserContext';\nimport React, { useState } from 'react';\nimport confetti from 'canvas-confetti';\nimport { GameProvider, useGame } from '../../context/GameContext';\nimport GameShell from '../GameUI/GameShell';\nimport * as styles from './OddOneOut.module.css';\n\ninterface OddOption {\n  text: string;\n  isOdd: boolean;\n  reason: string; // The explanation for why it is odd (or why others are similar)\n}\n\ninterface OddOneOutProps {\n  rounds: { options: OddOption[] }[];\n}\n\nconst OddOneOutContent: React.FC<OddOneOutProps> = ({ rounds }) => {\n  const { state, dispatch } = useGame();\n  const { user, updateProgress, incrementStreak } = useUser();\n  const [selectedOption, setSelectedOption] = useState<number | null>(null);\n\n  const currentRoundData = rounds[state.currentRound];\n\n  const handleSelect = (index: number) => {\n    if (state.status !== `playing`) return;\n\n    setSelectedOption(index);\n    const option = currentRoundData.options[index];\n\n    const isCorrect = option.isOdd;\n\n    if (isCorrect) {\n      confetti({\n        particleCount: 50,\n        spread: 60,\n        origin: { y: 0.6 },\n      });\n\n      // Update stats\n      updateProgress({ wordsMastered: user.wordsMastered + 1 });\n\n      // Check if this is the last round\n      if (state.currentRound === rounds.length - 1) {\n        updateProgress({ labsCompleted: user.labsCompleted + 1 });\n        incrementStreak();\n      }\n    }\n\n    dispatch({\n      type: `SUBMIT_ANSWER`,\n      isCorrect,\n      question: `Round ${state.currentRound + 1}`,\n      userAnswer: option.text,\n      correctAnswer:\n        currentRoundData.options.find((o) => o.isOdd)?.text || `Unknown`,\n    });\n\n    // No auto-advance\n  };\n\n  const handleNext = () => {\n    setSelectedOption(null);\n    dispatch({ type: `NEXT_ROUND` });\n  };\n\n  if (!currentRoundData) return null;\n\n  return (\n    <GameShell\n      title=\"Odd One Out\"\n      description=\"Find the word that doesn't fit the pattern.\"\n      onStart={() =>\n        dispatch({ type: `START_GAME`, totalRounds: rounds.length })\n      }\n    >\n      <div className={styles.container}>\n        <div className={styles.grid}>\n          {currentRoundData.options.map((option, idx) => {\n            // Determine styling based on state\n            let statusClass = ``;\n            if (state.status === `success` || state.status === `error`) {\n              if (option.isOdd) statusClass = styles.correct;\n              else if (idx === selectedOption) statusClass = styles.incorrect;\n            }\n\n            return (\n              <button\n                key={idx}\n                className={`${styles.option} ${statusClass}`}\n                onClick={() => handleSelect(idx)}\n                disabled={state.status !== `playing`}\n              >\n                {option.text}\n              </button>\n            );\n          })}\n        </div>\n\n        {(state.status === `success` || state.status === `error`) && (\n          <div className={styles.reason}>\n            <strong>\n              {currentRoundData.options.find((o) => o.isOdd)?.reason}\n            </strong>\n            <div style={{ marginTop: `1rem` }}>\n              <button className={styles.nextButton} onClick={handleNext}>\n                Next Challenge \n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </GameShell>\n  );\n};\n\nconst OddOneOut: React.FC<OddOneOutProps> = (props) => (\n  <GameProvider>\n    <OddOneOutContent {...props} />\n  </GameProvider>\n);\n\nexport default OddOneOut;\n","// extracted by mini-css-extract-plugin\nexport var container = \"OddOneOut-module--container--4b7c9\";\nexport var correct = \"OddOneOut-module--correct--5f46b\";\nexport var fadeIn = \"OddOneOut-module--fadeIn--099af\";\nexport var grid = \"OddOneOut-module--grid--a6178\";\nexport var incorrect = \"OddOneOut-module--incorrect--38a39\";\nexport var nextButton = \"OddOneOut-module--nextButton--69454\";\nexport var option = \"OddOneOut-module--option--211fe\";\nexport var reason = \"OddOneOut-module--reason--4599c\";\nexport var title = \"OddOneOut-module--title--e236a\";","// extracted by mini-css-extract-plugin\nexport var card = \"Card-module--card--f5e30\";\nexport var title = \"Card-module--title--6c656\";","import React from 'react';\nimport * as styles from './Card.module.css';\n\ninterface CardProps {\n  children: React.ReactNode;\n  className?: string;\n  title?: string;\n}\n\nconst Card: React.FC<CardProps> = ({ children, className = ``, title }) => {\n  return (\n    <div className={`${styles.card} ${className}`}>\n      {title && <h3 className={styles.title}>{title}</h3>}\n      {children}\n    </div>\n  );\n};\n\nexport default Card;\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var w = new Worker(ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([\n        c + ';addEventListener(\"error\",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'\n    ], { type: 'text/javascript' }))));\n    w.onmessage = function (e) {\n        var d = e.data, ed = d.$e$;\n        if (ed) {\n            var err = new Error(ed[0]);\n            err['code'] = ed[1];\n            err.stack = ed[2];\n            cb(err, null);\n        }\n        else\n            cb(null, d);\n    };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, i32 = Int32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new i32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return { b: b, r: r };\n};\nvar _a = freb(fleb, 2), fl = _a.b, revfl = _a.r;\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b.b, revfd = _b.r;\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >> 8) | ((x & 0x00FF) << 8)) >> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i) {\n        if (cd[i])\n            ++l[cd[i] - 1];\n    }\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 1; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p + 7) / 8) | 0; };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    return new u8(v.subarray(s, e));\n};\n/**\n * Codes for errors generated within this library\n */\nexport var FlateErrorCode = {\n    UnexpectedEOF: 0,\n    InvalidBlockType: 1,\n    InvalidLengthLiteral: 2,\n    InvalidDistance: 3,\n    StreamFinished: 4,\n    NoStreamHandler: 5,\n    InvalidHeader: 6,\n    NoCallback: 7,\n    InvalidUTF8: 8,\n    ExtraFieldTooLong: 9,\n    InvalidDate: 10,\n    FilenameTooLong: 11,\n    StreamFinishing: 12,\n    InvalidZipData: 13,\n    UnknownCompressionMethod: 14\n};\n// error codes\nvar ec = [\n    'unexpected EOF',\n    'invalid block type',\n    'invalid length/literal',\n    'invalid distance',\n    'stream finished',\n    'no stream handler',\n    ,\n    'no callback',\n    'invalid UTF-8 data',\n    'extra field too long',\n    'date not in range 1980-2099',\n    'filename too long',\n    'stream finishing',\n    'invalid zip data'\n    // determined by unknown compression method\n];\n;\nvar err = function (ind, msg, nt) {\n    var e = new Error(msg || ec[ind]);\n    e.code = ind;\n    if (Error.captureStackTrace)\n        Error.captureStackTrace(e, err);\n    if (!nt)\n        throw e;\n    return e;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, st, buf, dict) {\n    // source length       dict length\n    var sl = dat.length, dl = dict ? dict.length : 0;\n    if (!sl || st.f && !st.l)\n        return buf || new u8(0);\n    var noBuf = !buf;\n    // have to estimate size\n    var resize = noBuf || st.i != 2;\n    // no state\n    var noSt = st.i;\n    // Assumes roughly 33% compression ratio average\n    if (noBuf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                // ensure size\n                if (resize)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8, st.f = final;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                err(1);\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17\n        if (resize)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n            if (!c)\n                err(2);\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >> 4;\n                if (!d)\n                    err(3);\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                if (resize)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                if (bt < dt) {\n                    var shift = dl - dt, dend = Math.min(dt, end);\n                    if (shift + bt < 0)\n                        err(3);\n                    for (; bt < dend; ++bt)\n                        buf[bt] = dict[shift + bt];\n                }\n                for (; bt < end; ++bt)\n                    buf[bt] = buf[bt - dt];\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt, st.f = final;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    // don't reallocate for streams or user buffers\n    return bt != buf.length && noBuf ? slc(buf, 0, bt) : buf.subarray(0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n    d[o + 2] |= v >> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return { t: et, l: 0 };\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return { t: v, l: 1 };\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return { t: new u8(tr), l: mbt };\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return { c: cl.subarray(0, cli), n: s };\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a.t, mlb = _a.l;\n    var _b = hTree(df, 15), ddt = _b.t, mdb = _b.l;\n    var _c = lc(dlt), lclt = _c.c, nlc = _c.n;\n    var _d = lc(ddt), lcdt = _d.c, ndc = _d.n;\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        ++lcfreq[lclt[i] & 31];\n    for (var i = 0; i < lcdt.length; ++i)\n        ++lcfreq[lcdt[i] & 31];\n    var _e = hTree(lcfreq, 7), lct = _e.t, mlcb = _e.l;\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + 2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18];\n    if (bs >= 0 && flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >> 5) & 127), p += clct[i] >> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        var sym = syms[i];\n        if (sym > 255) {\n            var len = (sym >> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (sym >> 23) & 31), p += fleb[len];\n            var dst = sym & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (sym >> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[sym]), p += ll[sym];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new i32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, st) {\n    var s = st.z || dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var lst = st.l;\n    var pos = (st.r || 0) & 7;\n    if (lvl) {\n        if (pos)\n            w[0] = st.r >> 3;\n        var opt = deo[lvl - 1];\n        var n = opt >> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = st.p || new u16(32768), head = st.h || new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new i32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index          l/lind  waitdx          blkpos\n        var lc_1 = 0, eb = 0, i = st.i || 0, li = 0, wi = st.w || 0, bs = 0;\n        for (; i + 2 < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768    previous index mod\n            var imod = i & 32767, pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && (rem > 423 || !lst)) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = imod - pimod & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = i - dif + j & 32767;\n                                    var pti = prev[ti];\n                                    var cd = ti - pti & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += imod - pimod & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one int32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        for (i = Math.max(i, wi); i < s; ++i) {\n            syms[li++] = dat[i];\n            ++lf[dat[i]];\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        if (!lst) {\n            st.r = (pos & 7) | w[(pos / 8) | 0] << 3;\n            // shft(pos) now 1 less if pos & 7 != 0\n            pos -= 7;\n            st.h = head, st.p = prev, st.i = i, st.w = wi;\n        }\n    }\n    else {\n        for (var i = st.w || 0; i < s + lst; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e >= s) {\n                // write final block\n                w[(pos / 8) | 0] = lst;\n                e = s;\n            }\n            pos = wfblk(w, pos + 1, dat.subarray(i, e));\n        }\n        st.i = s;\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new Int32Array(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && -306674912) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = -1;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return ~c; }\n    };\n};\n// Adler32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length | 0;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 2655, l);\n                for (; i < e; ++i)\n                    m += n += d[i];\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n            }\n            a = n, b = m;\n        },\n        d: function () {\n            a %= 65521, b %= 65521;\n            return (a & 255) << 24 | (a & 0xFF00) << 8 | (b & 255) << 8 | (b >> 8);\n        }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    if (!st) {\n        st = { l: 1 };\n        if (opt.dictionary) {\n            var dict = opt.dictionary.subarray(-32768);\n            var newDat = new u8(dict.length + dat.length);\n            newDat.set(dict);\n            newDat.set(dat, dict.length);\n            dat = newDat;\n            st.w = dict.length;\n        }\n    }\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? (st.l ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 20) : (12 + opt.mem), pre, post, st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/\\s+/g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return fnStr;\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k].buffer) {\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n        }\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            fnStr = wcln(fns[i], fnStr, td_1);\n        ch[id] = { c: wcln(fns[m], fnStr, td_1), e: td_1 };\n    }\n    var td = mrg({}, ch[id].e);\n    return wk(ch[id].c + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, i32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, ec, hMap, max, bits, bits16, shft, slc, err, inflt, inflateSync, pbf, gopt]; };\nvar bDflt = function () { return [u8, u16, i32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zls]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get opts\nvar gopt = function (o) { return o && {\n    out: o.size && new u8(o.size),\n    dictionary: o.dictionary\n}; };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) {\n        if (ev.data.length) {\n            strm.push(ev.data[0], ev.data[1]);\n            postMessage([ev.data[0].length]);\n        }\n        else\n            strm.flush();\n    };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id, flush, ext) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else if (!Array.isArray(dat))\n            ext(dat);\n        else if (dat.length == 1) {\n            strm.queuedSize -= dat[0];\n            if (strm.ondrain)\n                strm.ondrain(dat[0]);\n        }\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.queuedSize = 0;\n    strm.push = function (d, f) {\n        if (!strm.ondata)\n            err(5);\n        if (t)\n            strm.ondata(err(4, 0, 1), null, !!f);\n        strm.queuedSize += d.length;\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n    if (flush) {\n        strm.flush = function () { w.postMessage([]); };\n    }\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        err(6, 'invalid gzip data');\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += (d[10] | d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + (o.filename ? o.filename.length + 1 : 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (o.dictionary && 32);\n    c[1] |= 31 - ((c[0] << 8) | c[1]) % 31;\n    if (o.dictionary) {\n        var h = adler();\n        h.p(o.dictionary);\n        wbytes(c, 2, h.d());\n    }\n};\n// zlib start\nvar zls = function (d, dict) {\n    if ((d[0] & 15) != 8 || (d[0] >> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        err(6, 'invalid zlib data');\n    if ((d[1] >> 5 & 1) == +!dict)\n        err(6, 'invalid zlib data: ' + (d[1] & 32 ? 'need' : 'unexpected') + ' dictionary');\n    return (d[1] >> 3 & 4) + 2;\n};\nfunction StrmOpt(opts, cb) {\n    if (typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n        this.s = { l: 0, i: 32768, w: 32768, z: 32768 };\n        // Buffer length must always be 0 mod 32768 for index calculations to be correct when modifying head and prev\n        // 98304 = 32768 (lookback) + 65536 (common chunk size)\n        this.b = new u8(98304);\n        if (this.o.dictionary) {\n            var dict = this.o.dictionary.subarray(-32768);\n            this.b.set(dict, 32768 - dict.length);\n            this.s.i = 32768 - dict.length;\n        }\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, this.s), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        var endLen = chunk.length + this.s.z;\n        if (endLen > this.b.length) {\n            if (endLen > 2 * this.b.length - 32768) {\n                var newBuf = new u8(endLen & -32768);\n                newBuf.set(this.b.subarray(0, this.s.z));\n                this.b = newBuf;\n            }\n            var split = this.b.length - this.s.z;\n            this.b.set(chunk.subarray(0, split), this.s.z);\n            this.s.z = this.b.length;\n            this.p(this.b, false);\n            this.b.set(this.b.subarray(-32768));\n            this.b.set(chunk.subarray(split), 32768);\n            this.s.z = chunk.length - split + 32768;\n            this.s.i = 32766, this.s.w = 32768;\n        }\n        else {\n            this.b.set(chunk, this.s.z);\n            this.s.z += chunk.length;\n        }\n        this.s.l = final & 1;\n        if (this.s.z > this.s.w + 8191 || final) {\n            this.p(this.b, final || false);\n            this.s.w = this.s.i, this.s.i -= 2;\n        }\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * deflated output for small inputs.\n     */\n    Deflate.prototype.flush = function () {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        this.p(this.b, false);\n        this.s.w = this.s.i, this.s.i -= 2;\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6, 1);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    function Inflate(opts, cb) {\n        // no StrmOpt here to avoid adding to workerizer\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        var dict = opts && opts.dictionary && opts.dictionary.subarray(-32768);\n        this.s = { i: 0, b: dict ? dict.length : 0 };\n        this.o = new u8(32768);\n        this.p = new u8(0);\n        if (dict)\n            this.o.set(dict);\n    }\n    Inflate.prototype.e = function (c) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        if (!this.p.length)\n            this.p = c;\n        else if (c.length) {\n            var n = new u8(this.p.length + c.length);\n            n.set(this.p), n.set(c, this.p.length), this.p = n;\n        }\n    };\n    Inflate.prototype.c = function (final) {\n        this.s.i = +(this.d = final || false);\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.s, this.o);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    function AsyncInflate(opts, cb) {\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Inflate(ev.data);\n            onmessage = astrm(strm);\n        }, 7, 0);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gopt(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, opts) {\n    return inflt(data, { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        this.l += chunk.length;\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, this.s);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * GZIPped output for small inputs.\n     */\n    Gzip.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8, 1);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming single or multi-member GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    function Gunzip(opts, cb) {\n        this.v = 1;\n        this.r = 0;\n        Inflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        this.r += chunk.length;\n        if (this.v) {\n            var p = this.p.subarray(this.v - 1);\n            var s = p.length > 3 ? gzs(p) : 4;\n            if (s > p.length) {\n                if (!final)\n                    return;\n            }\n            else if (this.v > 1 && this.onmember) {\n                this.onmember(this.r - p.length);\n            }\n            this.p = p.subarray(s), this.v = 0;\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n        // process concatenated GZIP\n        if (this.s.f && !this.s.l && !final) {\n            this.v = shft(this.s.p) + 9;\n            this.s = { i: 0 };\n            this.o = new u8(0);\n            this.push(new u8(0), final);\n        }\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming single or multi-member GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    function AsyncGunzip(opts, cb) {\n        var _this = this;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gunzip(ev.data);\n            strm.onmember = function (offset) { return postMessage(offset); };\n            onmessage = astrm(strm);\n        }, 9, 0, function (offset) { return _this.onmember && _this.onmember(offset); });\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0], ev.data[1])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, opts) {\n    var st = gzs(data);\n    if (st + 8 > data.length)\n        err(6, 'invalid gzip data');\n    return inflt(data.subarray(st, -8), { i: 2 }, opts && opts.out || new u8(gzl(data)), opts && opts.dictionary);\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && (this.o.dictionary ? 6 : 2), f && 4, this.s);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * zlibbed output for small inputs.\n     */\n    Zlib.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10, 1);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, opts.dictionary ? 6 : 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    function Unzlib(opts, cb) {\n        Inflate.call(this, opts, cb);\n        this.v = opts && opts.dictionary ? 2 : 1;\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 6 && !final)\n                return;\n            this.p = this.p.subarray(zls(this.p, this.v - 1)), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                err(6, 'invalid zlib data');\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    function AsyncUnzlib(opts, cb) {\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Unzlib(ev.data);\n            onmessage = astrm(strm);\n        }, 11, 0);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gopt(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, opts) {\n    return inflt(data.subarray(zls(data, opts && opts.dictionary), -4), { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    function Decompress(opts, cb) {\n        this.o = StrmOpt.call(this, opts, cb) || {};\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n    }\n    // init substream\n    // overriden by AsyncDecompress\n    Decompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (dat, final) {\n            _this.ondata(dat, final);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(this.o)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(this.o)\n                        : new this.Z(this.o);\n                this.i();\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    function AsyncDecompress(opts, cb) {\n        Decompress.call(this, opts, cb);\n        this.queuedSize = 0;\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n    }\n    AsyncDecompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        };\n        this.s.ondrain = function (size) {\n            _this.queuedSize -= size;\n            if (_this.ondrain)\n                _this.ondrain(size);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        this.queuedSize += chunk.length;\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, opts) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, opts)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, opts)\n            : unzlibSync(data, opts);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k, op = o;\n        if (Array.isArray(val))\n            op = mrg(o, val[1]), val = val[0];\n        if (val instanceof u8)\n            t[n] = [val, op];\n        else {\n            t[n += '/'] = [new u8(0), op];\n            fltn(val, n, t, o);\n        }\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return { s: r, r: slc(d, i - 1) };\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        final = !!final;\n        if (this.t) {\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\n            if (final) {\n                if (this.t.decode().length)\n                    err(8);\n                this.t = null;\n            }\n            return;\n        }\n        if (!this.p)\n            err(4);\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (final) {\n            if (r.length)\n                err(8);\n            this.p = null;\n        }\n        else\n            this.p = r;\n        this.ondata(s, final);\n    };\n    return DecodeUTF8;\n}());\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        this.ondata(strToU8(chunk), this.d = final || false);\n    };\n    return EncodeUTF8;\n}());\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td) {\n        return td.decode(dat);\n    }\n    else {\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (r.length)\n            err(8);\n        return s;\n    }\n}\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// extra field length\nvar exfl = function (ex) {\n    var le = 0;\n    if (ex) {\n        for (var k in ex) {\n            var l = ex[k].length;\n            if (l > 65535)\n                err(9);\n            le += l + 4;\n        }\n    }\n    return le;\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\n    var fl = fn.length, ex = f.extra, col = co && co.length;\n    var exl = exfl(ex);\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c < 0 && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        err(10);\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >> 1)), b += 4;\n    if (c != -1) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c < 0 ? -c - 2 : c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl);\n    wbytes(d, b + 14, exl), b += 16;\n    if (ce != null) {\n        wbytes(d, b, col);\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    b += fl;\n    if (exl) {\n        for (var k in ex) {\n            var exf = ex[k], l = exf.length;\n            wbytes(d, b, +k);\n            wbytes(d, b + 2, l);\n            d.set(exf, b + 4), b += 4 + l;\n        }\n    }\n    if (col)\n        d.set(co, b), b += col;\n    return b;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexport { ZipPassThrough };\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexport { AsyncZipDeflate };\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this = this;\n        if (!this.ondata)\n            err(5);\n        // finishing or finished\n        if (this.d & 2)\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, false);\n        else {\n            var f = strToU8(file.filename), fl_1 = f.length;\n            var com = file.comment, o = com && strToU8(com);\n            var u = fl_1 != file.filename.length || (o && (com.length != o.length));\n            var hl_1 = fl_1 + exfl(file.extra) + 30;\n            if (fl_1 > 65535)\n                this.ondata(err(11, 0, 1), null, false);\n            var header = new u8(hl_1);\n            wzh(header, 0, file, f, u, -1);\n            var chks_1 = [header];\n            var pAll_1 = function () {\n                for (var _i = 0, chks_2 = chks_1; _i < chks_2.length; _i++) {\n                    var chk = chks_2[_i];\n                    _this.ondata(null, chk, false);\n                }\n                chks_1 = [];\n            };\n            var tr_1 = this.d;\n            this.d = 0;\n            var ind_1 = this.u.length;\n            var uf_1 = mrg(file, {\n                f: f,\n                u: u,\n                o: o,\n                t: function () {\n                    if (file.terminate)\n                        file.terminate();\n                },\n                r: function () {\n                    pAll_1();\n                    if (tr_1) {\n                        var nxt = _this.u[ind_1 + 1];\n                        if (nxt)\n                            nxt.r();\n                        else\n                            _this.d = 1;\n                    }\n                    tr_1 = 1;\n                }\n            });\n            var cl_1 = 0;\n            file.ondata = function (err, dat, final) {\n                if (err) {\n                    _this.ondata(err, dat, final);\n                    _this.terminate();\n                }\n                else {\n                    cl_1 += dat.length;\n                    chks_1.push(dat);\n                    if (final) {\n                        var dd = new u8(16);\n                        wbytes(dd, 0, 0x8074B50);\n                        wbytes(dd, 4, file.crc);\n                        wbytes(dd, 8, cl_1);\n                        wbytes(dd, 12, file.size);\n                        chks_1.push(dd);\n                        uf_1.c = cl_1, uf_1.b = hl_1 + cl_1 + 16, uf_1.crc = file.crc, uf_1.size = file.size;\n                        if (tr_1)\n                            uf_1.r();\n                        tr_1 = 1;\n                    }\n                    else if (tr_1)\n                        pAll_1();\n                }\n            };\n            this.u.push(uf_1);\n        }\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this = this;\n        if (this.d & 2) {\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, true);\n            return;\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this.d & 1))\n                        return;\n                    _this.u.splice(-1, 1);\n                    _this.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, -f.c - 2, l, f.o);\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexport { Zip };\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var badd = 30 + f.f.length + exfl(f.extra);\n                var loc = tot + badd;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n            }\n            catch (e) {\n                return cbd(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cbd(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cbd(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    m: m,\n                    u: s != fn.length || (m && (com.length != ms)),\n                    compression: compression\n                });\n                o += 30 + s + exl + l;\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl(err(11, 0, 1), null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        if (s > 65535)\n            err(11);\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            m: m,\n            u: s != fn.length || (m && (com.length != ms)),\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        out.set(f.c, f.o + badd);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this = this;\n        this.i = new Inflate(function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate(_, sz) {\n        var _this = this;\n        if (sz < 320000) {\n            this.i = new Inflate(function (dat, final) {\n                _this.ondata(null, dat, final);\n            });\n        }\n        else {\n            this.i = new AsyncInflate(function (err, dat, final) {\n                _this.ondata(err, dat, final);\n            });\n            this.terminate = this.i.terminate;\n        }\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        if (this.i.terminate)\n            data = slc(data, 0);\n        this.i.push(data, final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this = this;\n        if (!this.onfile)\n            err(5);\n        if (!this.p)\n            err(4);\n        if (this.c > 0) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push(toAdd);\n            chunk = chunk.subarray(len);\n            if (chunk.length)\n                return this.push(chunk, final);\n        }\n        else {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            if (!this.p.length)\n                buf = chunk;\n            else if (!chunk.length)\n                buf = this.p;\n            else {\n                buf = new u8(this.p.length + chunk.length);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            var l = buf.length, oc = this.c, add = oc && this.d;\n            var _loop_2 = function () {\n                var _a;\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1, is = i;\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_3 = [];\n                        this_1.k.unshift(chks_3);\n                        f = 2;\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (sc_1 == 4294967295) {\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n                        }\n                        else if (dd)\n                            sc_1 = -1;\n                        i += es;\n                        this_1.c = sc_1;\n                        var d_1;\n                        var file_1 = {\n                            name: fn_1,\n                            compression: cmp_1,\n                            start: function () {\n                                if (!file_1.ondata)\n                                    err(5);\n                                if (!sc_1)\n                                    file_1.ondata(null, et, true);\n                                else {\n                                    var ctr = _this.o[cmp_1];\n                                    if (!ctr)\n                                        file_1.ondata(err(14, 'unknown compression type ' + cmp_1, 1), null, false);\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_4 = chks_3; _i < chks_4.length; _i++) {\n                                        var dat = chks_4[_i];\n                                        d_1.push(dat, false);\n                                    }\n                                    if (_this.k[0] == chks_3 && _this.c)\n                                        _this.d = d_1;\n                                    else\n                                        d_1.push(et, true);\n                                }\n                            },\n                            terminate: function () {\n                                if (d_1 && d_1.terminate)\n                                    d_1.terminate();\n                            }\n                        };\n                        if (sc_1 >= 0)\n                            file_1.size = sc_1, file_1.originalSize = su_1;\n                        this_1.onfile(file_1);\n                    }\n                    return \"break\";\n                }\n                else if (oc) {\n                    if (sig == 0x8074B50) {\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                    else if (sig == 0x2014B50) {\n                        is = i -= 4, f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                }\n            };\n            var this_1 = this;\n            for (; i < l - 4; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            this.p = et;\n            if (oc < 0) {\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n                if (add)\n                    add.push(dat, !!f);\n                else\n                    this.k[+(f == 2)].push(dat);\n            }\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            this.p = buf.subarray(i);\n        }\n        if (final) {\n            if (this.c)\n                err(13);\n            this.p = null;\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexport { Unzip };\nvar mt = typeof queueMicrotask == 'function' ? queueMicrotask : typeof setTimeout == 'function' ? setTimeout : function (fn) { fn(); };\nexport function unzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cbd(err(13, 0, 1), null);\n            return tAll;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (lft) {\n        var c = lft;\n        var o = b4(data, e + 16);\n        var z = o == 4294967295 || c == 65535;\n        if (z) {\n            var ze = b4(data, e - 12);\n            z = b4(data, ze) == 0x6064B50;\n            if (z) {\n                c = lft = b4(data, ze + 32);\n                o = b4(data, ze + 48);\n            }\n        }\n        var fltr = opts && opts.filter;\n        var _loop_3 = function (i) {\n            var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n            o = no;\n            var cbl = function (e, d) {\n                if (e) {\n                    tAll();\n                    cbd(e, null);\n                }\n                else {\n                    if (d)\n                        files[fn] = d;\n                    if (!--lft)\n                        cbd(null, files);\n                }\n            };\n            if (!fltr || fltr({\n                name: fn,\n                size: sc,\n                originalSize: su,\n                compression: c_1\n            })) {\n                if (!c_1)\n                    cbl(null, slc(data, b, b + sc));\n                else if (c_1 == 8) {\n                    var infl = data.subarray(b, b + sc);\n                    // Synchronously decompress under 512KB, or barely-compressed data\n                    if (su < 524288 || sc > 0.8 * su) {\n                        try {\n                            cbl(null, inflateSync(infl, { out: new u8(su) }));\n                        }\n                        catch (e) {\n                            cbl(e, null);\n                        }\n                    }\n                    else\n                        term.push(inflate(infl, { size: su }, cbl));\n                }\n                else\n                    cbl(err(14, 'unknown compression type ' + c_1, 1), null);\n            }\n            else\n                cbl(null, null);\n        };\n        for (var i = 0; i < c; ++i) {\n            _loop_3(i);\n        }\n    }\n    else\n        cbd(null, {});\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @param opts The ZIP extraction options\n * @returns The decompressed files\n */\nexport function unzipSync(data, opts) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            err(13);\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295 || c == 65535;\n    if (z) {\n        var ze = b4(data, e - 12);\n        z = b4(data, ze) == 0x6064B50;\n        if (z) {\n            c = b4(data, ze + 32);\n            o = b4(data, ze + 48);\n        }\n    }\n    var fltr = opts && opts.filter;\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!fltr || fltr({\n            name: fn,\n            size: sc,\n            originalSize: su,\n            compression: c_2\n        })) {\n            if (!c_2)\n                files[fn] = slc(data, b, b + sc);\n            else if (c_2 == 8)\n                files[fn] = inflateSync(data.subarray(b, b + sc), { out: new u8(su) });\n            else\n                err(14, 'unknown compression type ' + c_2);\n        }\n    }\n    return files;\n}\n"],"names":["module","exports","r","a","length","e","n","Array","__esModule","column","item","matched","selected","shake","RootMatchContent","_ref","rounds","state","dispatch","useGame","user","updateProgress","incrementStreak","useUser","currentRoundData","currentRound","selectedRoot","setSelectedRoot","useState","selectedMeaning","setSelectedMeaning","matchedPairs","setMatchedPairs","mismatched","setMismatched","useEffect","status","pairs","some","p","root","confetti","particleCount","spread","origin","y","pairsCount","wordsMastered","labsCompleted","type","isCorrect","question","userAnswer","correctAnswer","setTimeout","checkMatch","meaning","find","prev","concat","_toConsumableArray","shuffledMeanings","React","sort","Math","random","_jsx","GameShell","title","description","onStart","totalRounds","children","className","_jsxs","styles","style","textAlign","marginBottom","map","pair","includes","onClick","handleRootClick","handleMeaningClick","props","GameProvider","l","t","Symbol","iterator","i","u","f","o","call","next","Object","done","push","value","danger","large","medium","outline","primary","secondary","small","variant","size","rootClassName","filter","Boolean","join","initialState","score","history","likedWords","Set","gameReducer","action","newLikedWords","add","word","delete","GameContext","createContext","undefined","useReducer","Provider","context","useContext","Error","isArray","url","controls","src","useTextToSpeech","voices","setVoices","isSpeaking","setIsSpeaking","supported","setSupported","userVoiceURI","voiceURI","window","updateVoices","speechSynthesis","getVoices","onvoiceschanged","speak","useCallback","text","rate","cancel","utterance","SpeechSynthesisUtterance","selectedVoice","pitch","v","lang","startsWith","localService","voice","onstart","onend","onerror","activeQuestion","answerDisplay","answerLabel","audioButtonLarge","container","correct","detailActions","detailCard","detailGrid","detailItem","detailLabel","detailPronunciation","detailWord","error","feedback","gameControls","hintsContainer","hintsHeader","hudContainer","hudItem","hudLabel","hudTotal","hudValue","input","inputGroup","playArea","popIn","progress","questionBtn","questionsGrid","slideDown","success","summaryTable","PickTheOriginContent","words","currentWord","fontSize","margin","display","gridTemplateColumns","gap","width","options","option","btnVariant","Button","choice","handleChoice","disabled","_typeof","constructor","prototype","main","global","isWorker","workerSize","canUseWorker","Worker","Blob","Promise","OffscreenCanvas","OffscreenCanvasRenderingContext2D","HTMLCanvasElement","transferControlToOffscreen","URL","createObjectURL","canUsePaths","Path2D","DOMMatrix","canDrawBitmap","canvas","ctx","getContext","fillRect","bitmap","transferToImageBitmap","createPattern","noop","promise","func","ModulePromise","Prom","skipTransform","frame","TIME","frames","lastFrameTime","worker","prom","resolves","defaultFire","bitmapMapper","Map","transform","has","get","height","drawImage","set","clear","raf","floor","requestAnimationFrame","cancelAnimationFrame","cb","id","onFrame","time","timer","clearTimeout","getWorker","code","toString","console","warn","execute","callback","postMessage","init","offscreen","fire","slice","resolve","workerDone","msg","data","removeEventListener","addEventListener","bind","reset","decorate","defaults","angle","startVelocity","decay","gravity","drift","ticks","x","shapes","zIndex","colors","disableForReducedMotion","scalar","prop","name","val","convert","onlyPositiveInt","number","randomInt","min","max","toDecimal","str","parseInt","colorsToRgb","hexToRgb","String","replace","substring","g","b","setCanvasWindowSize","document","documentElement","clientWidth","clientHeight","setCanvasRectSize","rect","getBoundingClientRect","randomPhysics","opts","radAngle","PI","radSpread","wobble","wobbleSpeed","velocity","angle2D","tiltAngle","color","shape","tick","totalTicks","tiltSin","tiltCos","wobbleX","wobbleY","ovalScalar","flat","updateFetti","fetti","cos","sin","x1","y1","x2","y2","fillStyle","beginPath","path","matrix","fill","pathString","pathMatrix","scaleX","scaleY","rotation","path2d","t1","addPath","t2","transformPath2D","abs","multiplySelf","pattern","setTransform","globalAlpha","ellipse","radiusX","radiusY","startAngle","endAngle","antiClockwise","save","translate","rotate","scale","arc","restore","rot","innerRadius","outerRadius","spikes","step","lineTo","moveTo","closePath","confettiCannon","globalOpts","animationObj","isLibCanvas","allowResize","hasResizeEventRegistered","globalDisableForReducedMotion","resizer","initialized","__confetti_initialized","preferLessMotion","matchMedia","matches","fireLocal","Number","getOrigin","temp","fettis","startX","startY","addFettis","animationFrame","destroy","animatingFettis","onDone","clearRect","update","animate","createElement","position","top","left","pointerEvents","getCanvas","body","appendChild","onResize","obj","resize","contains","removeChild","getDefaultFire","useWorker","apply","this","arguments","create","shapeFromPath","pathData","tempCtx","maxSize","minX","minY","maxX","maxY","isPointInPath","round","shapeFromText","textData","fontFamily","font","measureText","ceil","actualBoundingBoxRight","actualBoundingBoxLeft","actualBoundingBoxAscent","actualBoundingBoxDescent","padding","fillText","self","linkActive","Header","isMenuOpen","setIsMenuOpen","Link","to","toggleMenu","activeClassName","xmlns","viewBox","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","points","cx","cy","Date","getFullYear","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","SpeakerIcon","HeartIcon","_ref2","filled","ChevronIcon","_ref3","DefinitionIcon","OriginIcon","SentenceIcon","PartOfSpeechIcon","AltPronunciationIcon","AltDefinitionIcon","RootWordIcon","WordDetailCard","_ref4","onNext","pronunciation","definition","sentence","languageOfOrigin","etymologyDetails","TypeTheWordContent","_ref5","_availableQuestions$f","_availableQuestions$f2","userInput","setUserInput","isLiked","setIsLiked","inputRef","useRef","revealedQuestions","setRevealedQuestions","activeQuestionId","setActiveQuestionId","questionsCount","_inputRef$current","current","focus","availableQuestions","label","icon","getValue","w","_w$sentence","RegExp","getAudioValue","_w$partOfSpeech","partOfSpeech","_w$alternatePronuncia","alternatePronunciations","_w$alternateDefinitio","alternateDefinitions","rootWord","rootMeaning","spellingPattern","onDownloadCheatsheet","generatePDFCheatsheet","likedWordsList","pdf","jsPDF","pageWidth","internal","pageSize","getWidth","pageHeight","getHeight","maxWidth","yPosition","setFontSize","setFont","toLocaleDateString","forEach","addPage","wordTitle","defLines","splitTextToSize","sentLines","etymLines","setDrawColor","line","fileName","toISOString","split","from","_Fragment","handleLikeToggle","handlePlayAudio","_inputRef$current2","onSubmit","preventDefault","trimmedInput","trim","toLowerCase","ref","onChange","target","placeholder","autoComplete","autoCorrect","autoCapitalize","q","canAsk","isActive","questionId","info","displayValue","audioValue","handleAskQuestion","location","reload","decode","bytes","encoding","TextDecoder","encoder","TextEncoder","hostBigEndian","array","Uint8Array","Uint32Array","buffer","typedArrays","int8","globalThis","Int8Array","uint8","int16","Int16Array","uint16","Uint16Array","int32","Int32Array","uint32","uint64","BigUint64Array","int64","BigInt64Array","float32","Float32Array","float64","Float64Array","IOBuffer","byteLength","byteOffset","offset","lastWrittenByte","littleEndian","_data","_mark","_marks","dataIsGiven","ArrayBuffer","dvOffset","isView","DataView","available","isLittleEndian","setLittleEndian","isBigEndian","setBigEndian","skip","back","seek","mark","pushMark","popMark","pop","rewind","ensureAvailable","newLength","newArray","readBoolean","readUint8","readInt8","getInt8","getUint8","readByte","readBytes","readArray","BYTES_PER_ELEMENT","reverse","returnArray","readInt16","getInt16","readUint16","getUint16","readInt32","getInt32","readUint32","getUint32","readFloat32","getFloat32","readFloat64","getFloat64","readBigInt64","getBigInt64","readBigUint64","getBigUint64","readChar","fromCharCode","readChars","result","readUtf8","decodeText","writeBoolean","writeUint8","writeInt8","setInt8","_updateLastWrittenByte","setUint8","writeByte","writeBytes","writeInt16","setInt16","writeUint16","setUint16","writeInt32","setInt32","writeUint32","setUint32","writeFloat32","setFloat32","writeFloat64","setFloat64","writeBigInt64","setBigInt64","writeBigUint64","setBigUint64","writeChar","charCodeAt","writeChars","writeUtf8","encode","toArray","getWrittenByteLength","crcTable","c","k","initialCrc","crc","currentCrc","updateCrc","checkCrc","crcLength","chunkName","expectedCrc","actualCrc","unfilterNone","currentLine","newLine","bytesPerLine","unfilterSub","bytesPerPixel","unfilterUp","prevLine","unfilterAverage","unfilterPaeth","paethPredictor","pa","pb","pc","applyUnfilter","filterType","passLineBytes","osIsLittleEndian","swap16","empty","decodeInterlaceNull","params","channels","depth","newData","subarray","uint16Data","pngSignature","of","checkSignature","hasPngSignature","textChunkName","latin1Decoder","validateKeyword","keyword","validateLatin1","latin1Regex","test","decodetEXt","readKeyword","readLatin1","end","ColorType","CompressionMethod","FilterMethod","InterlaceMethod","DisposeOpType","BlendOpType","_checkCrc","_inflator","_png","_apng","_end","_hasPalette","_palette","_hasTransparency","_transparency","_compressionMethod","_filterMethod","_interlaceMethod","_colorType","_isAnimated","_numberOfFrames","_numberOfPlays","_frames","_writingDataChunks","super","numberOfFrames","numberOfPlays","decodeChunk","decodeImage","decodeApng","decodeApngChunk","decodeApngImage","decodeIHDR","decodePLTE","decodeIDAT","decodetRNS","decodeiCCP","decodepHYs","pushDataToFrame","decodeACTL","decodeFCTL","decodeFDAT","image","checkBitDepth","colorType","sequenceNumber","xOffset","yOffset","delayNumber","delayDenominator","disposeOp","blendOp","RangeError","palette","dataLength","dataOffset","err","alpha","compressionMethod","compressedProfile","iccEmbeddedProfile","profile","ppuX","ppuY","unitSpecifier","resolution","unit","newFrame","at","transparency","prevFrame","disposeFrame","addFrameDataToCanvas","imageFrame","row","col","index","channel","maxValue","calculatePixelIndices","frameIndex","sourceAlpha","foregroundValue","passes","xStep","yStep","resultData","passIndex","pass","passWidth","passHeight","outputX","outputY","decodeInterlaceAdam7","lastFrame","ResolutionUnitSpecifier","decodePng","arrayLikeToArray","TypeError","emptyComponents","MDXContext","useMDXComponents","components","contextComponents","MDXProvider","properties","allComponents","disableParentContext","OddOneOutContent","_currentRoundData$opt2","selectedOption","setSelectedOption","idx","statusClass","isOdd","_currentRoundData$opt","handleSelect","reason","marginTop","handleNext","u8","u16","i32","fleb","fdeb","clim","freb","eb","start","j","_a","fl","revfl","_b","revfd","rev","hMap","cd","mb","s","co","le","rvb","sv","r_1","m","flt","fdt","flm","fdm","shft","slc","wbits","wbits16","hTree","et","i0","i1","i2","maxSym","tr","mbt","ln","dt","lft","cst","i2_1","i2_2","i2_3","lc","cl","cli","cln","cls","clen","cf","wfblk","out","pos","dat","wblk","final","syms","lf","df","li","bs","bl","dlt","mlb","ddt","mdb","_c","lclt","nlc","_d","lcdt","ndc","lcfreq","_e","lct","mlcb","nlcc","lm","ll","dm","dl","flen","ftlen","dtlen","llm","lcts","it","clct","len","sym","dst","deo","dflt","lvl","plvl","pre","post","st","z","lst","opt","msk_1","head","h","bs1_1","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","maxd","ml","nl","mmd","md","ti","lin","din","adler","dopt","dictionary","dict","newDat","level","mem","log","wbytes","zlh","lv","zlibSync","td","stream","queueMicrotask"],"ignoreList":[],"sourceRoot":""}